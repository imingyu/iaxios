{"version":3,"file":"iaxios.js","sources":["../src/util.js","../src/feature.js","../src/process.js","../src/options.js","../src/index.js"],"sourcesContent":["import Qs from 'qs';\r\nexport var paramsSerializer = obj => {\r\n    return Qs.stringify(obj, { arrayFormat: 'brackets' });//如何序列化params，params会拼接的url后面\r\n}\r\nexport var stringifyData = obj => {\r\n    return Qs.stringify(obj);\r\n}\r\n\r\nexport var isPromise = obj => {\r\n    return obj && obj.then && obj.catch;\r\n}\r\n\r\nexport var uniqueID = () => {\r\n    return (Math.random() + \"\").replace('0.', '');\r\n}\r\n\r\nexport var getValue = (propExp, obj) => {\r\n    try {\r\n        var fun = new Function('obj', 'var result;try{result=obj.' + propExp + ';}catch(error){};return result;');\r\n        return fun(obj);\r\n    } catch (error) {\r\n    }\r\n};\r\n\r\nexport var validOptions = ops => {\r\n    if (typeof ops === 'object') {\r\n        var msg = item => {\r\n            return `${item}必需是object类型`;\r\n        }\r\n        if (ops.hasOwnProperty('features') && typeof ops.features !== 'object') {\r\n            throw new TypeError(msg('options.features'));\r\n        }\r\n        if (ops.hasOwnProperty('requestConfigList') && typeof ops.requestConfigList !== 'object') {\r\n            throw new TypeError(msg('options.requestConfigList'));\r\n        }\r\n        if (ops.hasOwnProperty('axios') && typeof ops.axios !== 'object') {\r\n            throw new TypeError(msg('options.axios'));\r\n        }\r\n        if (ops.hasOwnProperty('validators') && typeof ops.validators !== 'object') {\r\n            throw new TypeError(msg('options.validators'));\r\n        }\r\n        if (ops.hasOwnProperty('handlers') && typeof ops.handlers !== 'object') {\r\n            throw new TypeError(msg('options.handlers'));\r\n        }\r\n    }\r\n}\r\n\r\nexport var standardAuthOptions = item => {\r\n    var vi;\r\n    if (typeof item === 'object') {\r\n        vi = item;\r\n    } else if (typeof item === 'function') {\r\n        vi = {\r\n            handler: item\r\n        };\r\n    } else {\r\n        vi = {\r\n            enabled: item\r\n        };\r\n    }\r\n    return vi;\r\n}\r\n\r\nexport var standardFeaturesOptions = ops => {\r\n    if (ops && typeof ops.features === 'object') {\r\n        Object.keys(ops.features).forEach(key => {\r\n            var val = ops.features[key];\r\n            if (typeof val === 'undefined' || val == null) {\r\n                delete ops.features[key];\r\n            } else if (typeof val === 'boolean') {\r\n                ops.features[key] = {\r\n                    enabled: val\r\n                }\r\n            }\r\n        })\r\n    }\r\n    return ops;\r\n}\r\n\r\nexport var standardRequestConfigItem = (cfg) => {\r\n    if (!cfg) return;\r\n    if (typeof cfg === 'object') {\r\n        standardFeaturesOptions(cfg);\r\n        var result = {\r\n            features: cfg.features,\r\n            handlers: cfg.handlers || {},\r\n            requestConfigList: undefined,\r\n            axios: undefined,\r\n            validators: undefined\r\n        },\r\n            axiosOps = {};\r\n\r\n        Object.keys(cfg).forEach(item => {\r\n            if (!result.hasOwnProperty(item)) {\r\n                axiosOps[item] = cfg[item];\r\n            }\r\n        });\r\n        result.axios = axiosOps;\r\n        return result;\r\n    }\r\n    return cfg;\r\n}\r\n\r\nexport var standardOptions = (ops) => {\r\n    if (!ops || typeof ops !== 'object' || ops === null) return;\r\n    standardFeaturesOptions(ops);\r\n    return ops;\r\n}\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n            function (obj) {\r\n                return jQuery.type(obj) === 'array'\r\n            },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","import axios from 'axios';\r\nimport * as util from './util.js';\r\n\r\nconst stages = ['before', 'sending', 'after'];\r\n\r\nvar check = (feature, checkData, resolve, process) => {\r\n    var checkResult = feature.checker(checkData, process),\r\n        stage = `${feature.stage}.${feature.name}`;\r\n    if (util.isPromise(checkResult)) {\r\n        checkResult.then(result => {\r\n            resolve({\r\n                state: result ? 'resolve' : 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }).catch(error => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        })\r\n    } else {\r\n        resolve({\r\n            state: checkResult ? 'resolve' : 'reject',\r\n            stage: stage,\r\n            data: checkData\r\n        });\r\n    }\r\n}\r\n\r\n\r\nclass Feature {\r\n    constructor(name, stage, handler, checker, beforeReject) {\r\n        stage = stage || '';\r\n        stage = stage.toLowerCase();\r\n        this.name = name;\r\n        this.stage = stages.indexOf(stage) != -1 ? stage : 'before';\r\n        this.handler = handler;\r\n        this.checker = typeof checker === 'function' ? checker : function (result) {\r\n            return result;\r\n        };\r\n        this.beforeReject = typeof beforeReject === 'function' ? beforeReject : function () { };\r\n    }\r\n\r\n    exec(process) {\r\n        var self = this,\r\n            args = Array.from(arguments);\r\n        return new Promise((resolve, reject) => {\r\n            var result = self.handler.apply(self, args),\r\n                stage = `${self.stage}.${self.name}`;\r\n            if (util.isPromise(result)) {\r\n                result.then(data => {\r\n                    check(self, data, resolve, process);\r\n                }).catch(error => {\r\n                    if (axios.isCancel(error)) {\r\n                        stage = \"cancel\";\r\n                    }\r\n                    resolve({\r\n                        state: 'reject',\r\n                        stage: stage,\r\n                        data: error\r\n                    });\r\n                })\r\n            } else {\r\n                check(self, result, resolve, process);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nFeature.map = {};\r\n\r\n\r\n//认证功能\r\nFeature.map['auth'] = new Feature('auth', 'before', function (process) {\r\n    var authOps = process.featureOptions.auth;\r\n    if (authOps && typeof authOps.handler === 'function') {\r\n        return authOps.handler(process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`), process.requestArgs);\r\n    } else {\r\n        return true;\r\n    }\r\n}, null, function (process) {\r\n    var authOps = process.featureOptions.auth;\r\n    if (typeof authOps.onUnAuth === 'function') {\r\n        authOps.onUnAuth(process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`), process.requestArgs);\r\n    }\r\n});\r\n\r\n//validator功能\r\nvar validatorFeature = new Feature('validator', 'before', function (process) {\r\n    var requestConfig = process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`),\r\n        vsAll = process.getIAxiosOptionItem('validators'),\r\n        vsConfig = process.featureOptions.validator,\r\n        vsRequest = vsAll[process.requestName],//request对应的验证器\r\n        execValidators = [];\r\n\r\n    if (typeof vsRequest === 'function') {\r\n        execValidators.push(vsRequest)\r\n    } else if (Array.isArray(vsRequest)) {\r\n        execValidators = execValidators.concat(vsRequest);\r\n    }\r\n    if (typeof vsConfig === 'function') {\r\n        execValidators.push(vsConfig)\r\n    } else if (Array.isArray(vsConfig)) {\r\n        execValidators = execValidators.concat(vsConfig);\r\n    } else if (typeof vsConfig === 'object' && vsConfig.enabled && vsConfig.validators) {\r\n        execValidators = execValidators.concat(vsConfig.validators || []);\r\n    }\r\n\r\n    return Promise.all(execValidators.map(item => {\r\n        var itemResult = item(requestConfig, process.requestArgs);\r\n        if (util.isPromise(itemResult)) {\r\n            return itemResult;\r\n        } else {\r\n            return Promise.resolve(itemResult);\r\n        }\r\n    }));\r\n}, function (datas, process) {\r\n    var vsConfig = process.featureOptions.validator,\r\n        checkHanlder = vsConfig.checkHanlder;\r\n    if (typeof checkHanlder === 'function') {\r\n        return checkHanlder(datas);\r\n    } else {\r\n        return true;\r\n    }\r\n}, function (process) {\r\n    var vsConfig = process.featureOptions.validator,\r\n        onUnValid = vsConfig.onUnValid;\r\n    if (typeof onUnValid === 'function') {\r\n        var validatorData = process.dataMap.find(item => item.stage === 'before.validator');\r\n        return onUnValid(validatorData ? validatorData.data : undefined);\r\n    }\r\n});\r\nFeature.map[validatorFeature.name] = validatorFeature;\r\n\r\n//发送请求功能\r\nconst senderFeature = new Feature('sender', 'sending', function (process) {\r\n    var iaxios = process.iaxios,\r\n        requestName = process.requestName,\r\n        requestConfig = process.getIAxiosOptionItem(`requestConfigList['${requestName}']`),\r\n        ajaxOptions = process.getIAxiosOptionItem('axios'),\r\n        handlers = process.getIAxiosOptionItem(`handlers`);\r\n\r\n    //3.获取请求的真实url：getUrl\r\n    if (typeof handlers.getUrl === 'function') {\r\n        var computedUrl = handlers.getUrl(requestConfig);\r\n        if (computedUrl) {\r\n            ajaxOptions.url = computedUrl + \"\";\r\n        } else {\r\n            ajaxOptions.url = requestConfig.url;\r\n        }\r\n    }\r\n    if (!ajaxOptions.url || String.prototype.trim.call(ajaxOptions.url) === \"\") {\r\n        ajaxOptions.url = requestName + \"\";\r\n    }\r\n\r\n    senderFeature.checker = function (res) {\r\n        return (process.getIAxiosOptionItem('handlers.checkResult') || function () { return true })(res);\r\n    }\r\n\r\n    //4.应用计算后的axios配置信息：axios.request \r\n    var cancelTokenSource = axios.CancelToken.source();\r\n    ajaxOptions.cancelToken = cancelTokenSource.token;\r\n    var requestModel = process.requestArgs && process.requestArgs.length > 0 ? process.requestArgs[0] : {};\r\n    if (ajaxOptions.method === 'get') {\r\n        ajaxOptions.params = ajaxOptions.params || {};\r\n        if (typeof ajaxOptions.params === 'object') {\r\n            util.extend(true, ajaxOptions.params, requestModel);\r\n        } else if (typeof ajaxOptions.params === 'string') {\r\n            ajaxOptions.params += '&' + util.paramsSerializer(requestModel);\r\n        }\r\n    } else {\r\n        ajaxOptions.data = ajaxOptions.data || {};\r\n        if (typeof ajaxOptions.data === 'object') {\r\n            util.extend(true, ajaxOptions.data, requestModel);\r\n        } else if (typeof ajaxOptions.data === 'string') {\r\n            ajaxOptions.data += '&' + util.stringifyData(requestModel);\r\n        }\r\n    }\r\n    process.cancelToken = cancelTokenSource;\r\n\r\n    //5.开始发送请求\r\n    return iaxios.axios.request(ajaxOptions);\r\n});\r\nFeature.map[senderFeature.name] = senderFeature;\r\n\r\nexport default Feature;","import Feature from './feature.js';\r\nimport * as util from './util.js';\r\n\r\n\r\n\r\nvar defaultConvert = data => {\r\n    return data;\r\n}\r\n\r\nvar getConvert = (name, process) => {\r\n    var convert = process.getIAxiosOptionItem('handlers.' + name);\r\n    convert = typeof convert === 'function' ? convert : defaultConvert;\r\n    return convert;\r\n}\r\n\r\nexport default class Process {\r\n    constructor() {\r\n        this.stack = [];\r\n        this.iaxios = null;\r\n        this.otherOptions = null;\r\n        this.requestName = '';\r\n        this.requestArgs = null;\r\n        this.isCancel = false;\r\n        this.dataMap = [];\r\n        this.cancelToken = null;\r\n    }\r\n\r\n    run() {\r\n        //执行run函数后，即锁定当前配置中的Feature，解释后续再有功能的配置变化，也不会执行，函数除外\r\n        var process = this;\r\n\r\n        function CancelPromise(executor) {\r\n            var p = new Promise(function (resolve, reject) {\r\n                // before\r\n                return executor(resolve, reject);\r\n            });\r\n            // after\r\n            p.__proto__ = CancelPromise.prototype;\r\n            return p;\r\n        }\r\n        CancelPromise.__proto__ = Promise;\r\n        CancelPromise.prototype.__proto__ = Promise.prototype;\r\n        CancelPromise.prototype.cancel = function (data) {\r\n            return process.cancel(data);\r\n        }\r\n\r\n\r\n        var promise = new CancelPromise((resolve, reject) => {\r\n            var orgFeatures = process.getIAxiosOptionItem('features');\r\n            var keys = Object.keys(orgFeatures).filter(name => {\r\n                var f = orgFeatures[name];\r\n                return !!f.enabled;//只抓取已启用的功能\r\n            });\r\n            var features = keys.map(name => {\r\n                return Feature.map[name];\r\n            }).filter(f => {\r\n                return !!f;\r\n            });\r\n            features.push(Feature.map['sender']);\r\n            features = features.filter(f => f.stage === 'before').concat(features.filter(f => f.stage === 'sending'), features.filter(f => f.stage === 'after'))\r\n\r\n            //将功能实例赋值到process上\r\n            process.featureInstances = features;\r\n            process.featureOptions = orgFeatures;\r\n\r\n\r\n            features.forEach(featureIns => {\r\n                process.use(function (next) {\r\n                    if (process.isCancel) {\r\n                        reject(getConvert('rejectConvert', process)(process.dataMap, process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`)));\r\n                        return;\r\n                    }\r\n\r\n                    featureIns.exec(process).then(data => {\r\n                        process.dataMap.push(data);\r\n                        if (data.state === 'resolve') {\r\n                            if (featureIns.requiredResolve) {\r\n                                if (typeof featureIns.breforeResolve === 'function') {\r\n                                    featureIns.breforeResolve(process);\r\n                                }\r\n                                resolve(getConvert('resolveConvert', process)(data.data, process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`)));\r\n                            } else {\r\n                                if (process.stack.length > 0) {\r\n                                    next();\r\n                                } else {\r\n                                    resolve(getConvert('resolveConvert', process)(data.data, process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`)));\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (typeof featureIns.beforeReject === 'function') {\r\n                                featureIns.beforeReject(process);\r\n                            }\r\n                            reject(getConvert('rejectConvert', process)(process.dataMap, process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`)));\r\n                        }\r\n                    });\r\n                })\r\n            });\r\n            process.next();\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    cancel(data) {\r\n        if (this.isCancel) return;\r\n        this.isCancel = true;\r\n        if (this.cancelToken) {\r\n            this.cancelToken.cancel(data);\r\n        }\r\n    }\r\n\r\n    getIAxiosOptionItem(propExp) {\r\n        var configProp = `requestConfigList['${this.requestName}']`,\r\n            sendOptions = this.requestArgs.length > 1 ? this.requestArgs[this.requestArgs.length - 1] : undefined,\r\n            otherOptions = this.otherOptions;\r\n        if (configProp == propExp) {\r\n            return this.iaxios.getOptionItem(propExp, sendOptions, otherOptions);\r\n        } else {\r\n            var requestConfig = this.getIAxiosOptionItem(configProp),\r\n                standardConfig = util.standardRequestConfigItem(requestConfig);\r\n            return this.iaxios.getOptionItem.call(this.iaxios, propExp, sendOptions, otherOptions, typeof standardConfig === 'object' ? standardConfig : undefined);\r\n        }\r\n    }\r\n\r\n    use(handler) {\r\n        if (typeof handler !== 'function') return;\r\n        this.stack.push(handler);\r\n    }\r\n\r\n    next() {\r\n        var item = this.stack.shift();\r\n        if (item) {\r\n            item(this.next.bind(this));\r\n        }\r\n    }\r\n}","import * as util from './util.js';\r\nexport default {\r\n    requestConfigList: {}, //request配置元信息集合\r\n    axios: {\r\n        //axios配置\r\n        method: 'get',\r\n        paramsSerializer: util.paramsSerializer,\r\n        headers: {\r\n            common: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            post: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }\r\n        },\r\n        transformRequest: [function (data, headers) {\r\n            return util.stringifyData(data);\r\n        }]\r\n    },\r\n    validators: {},//验证器列表\r\n    features: { //启用iaxios的哪些功能？\r\n        auth: {\r\n            enabled: false\r\n        },\r\n        jsonp: {\r\n            enabled: false\r\n        }, //接口是否以jsonp方式发送\r\n        validator: {\r\n            enabled: false\r\n        }//启用验证器，调用iaxios.createRequest()返回的方法时，先取request配置中的验证器去验证参数，验证通过才会执行下面的逻辑\r\n    },\r\n    handlers: {\r\n        //获取请求的真实url\r\n        getUrl(requestConfig) {\r\n            return requestConfig.url;\r\n        },\r\n        //检查请求返回的结果，成功请resolve，失败请reject\r\n        checkResult(res, requestConfig) {\r\n            return res && res.data ? true : false;\r\n        },\r\n        //格式化请求成功的数据\r\n        resolveConvert(res, requestConfig) {\r\n            return res.data;\r\n        },\r\n        //格式化请求失败的数据\r\n        rejectConvert(rejectDataMap, requestConfig) {\r\n            return rejectDataMap;\r\n        }\r\n    }\r\n};","import { version } from '../package.json';\r\nimport axios from 'axios';\r\nimport Process from './process.js';\r\nimport * as util from './util.js';\r\nimport defaultIAxiosOptions from './options.js';\r\n\r\n/**\r\n * request发送流程：\r\n * 1.检查认证：auth\r\n * 2.验证参数：validator\r\n * 3.获取请求的真实url：getUrl\r\n * 4.应用计算后的axios配置信息：axios.request\r\n * 5.开始发送请求\r\n * 6.检查请求结果：checkResult\r\n * 7.格式化请求结果数据：成功：resolveConvert，失败：rejectConvert，取消：cancelConvert，未认证：unAuthConvert\r\n * 8.将处理的数据传递给后续函数处理：then/catch\r\n * 9.流程结束\r\n */\r\n\r\nclass IAxios {\r\n    constructor(ops) {\r\n        this.id = (Math.random() + \"\").replace('0.', '');\r\n        IAxios.map[this.id] = this;\r\n\r\n        //创建一个axios实例\r\n        this.axios = axios.create();\r\n\r\n        this.options = {};\r\n        this.setOptions(ops);\r\n    }\r\n    createRequest(requestName, otherOptions) {\r\n        var iaxiosIns = this;\r\n\r\n        return function request(model, ops) {\r\n            var requestArgs = Array.from(arguments),\r\n                process = new Process();\r\n            process.iaxios = iaxiosIns;\r\n            process.otherOptions = otherOptions;\r\n            process.requestName = requestName;\r\n            process.requestArgs = requestArgs;\r\n            process.isCancel = false;\r\n            process.dataMap = [];\r\n            process.cancelToken = null;\r\n\r\n            return process.run();\r\n        }\r\n    }\r\n    setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.validOptions(ops);\r\n            util.standardFeaturesOptions(ops);\r\n            util.extend(true, this.options, ops);\r\n        }\r\n    }\r\n    getOptionItem(key) {\r\n        if (!key) return;\r\n\r\n        var preOptions = arguments.length > 1 ? Array.from(arguments).splice(1, arguments.length - 1) : [];\r\n\r\n        var vals = [];\r\n        if (preOptions.length > 0) {\r\n            preOptions.forEach(item => {\r\n                if (item) vals.push(util.getValue(key, util.standardOptions(item)));\r\n            })\r\n        }\r\n        vals.push(util.getValue(key, this.options));\r\n        vals.push(util.getValue(key, defaultIAxiosOptions));\r\n        vals = vals.filter(v => {\r\n            return typeof v !== 'undefined' && v != null;\r\n        });\r\n\r\n        var val;\r\n\r\n        if (vals.length > 0) {\r\n            if (key === 'features') {\r\n                if (typeof vals[0] != 'object') {\r\n                    val = vals[0];\r\n                } else {\r\n                    val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n                    Object.keys(val).map(v => {\r\n                        val[v] = util.standardAuthOptions(val[v]);\r\n                    });\r\n                }\r\n            } else if (key.indexOf('features.') == 0 && key.lastIndexOf('.') !== key.length - 1) {\r\n                if (key.indexOf('.') === key.lastIndexOf('.')) {\r\n                    if (typeof vals[0] === 'boolean' && vals[0] === false) {\r\n                        val = {\r\n                            enabled: false\r\n                        };\r\n                    } else {\r\n                        var arr = [];\r\n                        vals.forEach(item => {\r\n                            arr.push(util.standardAuthOptions(item));\r\n                        });\r\n                        val = util.extend.apply(null, [true, {}].concat(arr.reverse()));\r\n                    }\r\n                } else {\r\n                    val = vals.find(v => {\r\n                        return typeof v !== 'undefined' && v != null;\r\n                    });\r\n                }\r\n            } else if (key === 'axios') {\r\n                val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n            } else {\r\n                if (vals.some(item => typeof item === 'object')) {\r\n                    val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n                } else {\r\n                    val = vals.find(v => {\r\n                        return typeof v !== 'undefined' && v != null;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    static create(ops) {\r\n        return new IAxios(ops);\r\n    }\r\n    static createRequest(requestName, otherOptions) {\r\n        return IAxios.map['default'].createRequest(requestName, otherOptions);\r\n    }\r\n    static setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.validOptions(ops);\r\n            util.standardFeaturesOptions(ops);\r\n            util.extend(true, defaultIAxiosOptions, ops);\r\n        }\r\n    }\r\n}\r\nIAxios.map = {};\r\n\r\nvar defaultIAxios = IAxios.create();\r\ndefaultIAxios.id = \"default\";\r\nIAxios.map['default'] = defaultIAxios;\r\n\r\nexport default {\r\n    create: IAxios.create,\r\n    createRequest: IAxios.createRequest,\r\n    setOptions: IAxios.setOptions,\r\n    IAxios: IAxios,\r\n    version: version\r\n}"],"names":["paramsSerializer","Qs","stringify","obj","arrayFormat","stringifyData","isPromise","then","catch","getValue","propExp","fun","Function","error","validOptions","ops","msg","item","hasOwnProperty","babelHelpers.typeof","features","TypeError","requestConfigList","axios","validators","handlers","standardAuthOptions","vi","standardFeaturesOptions","keys","forEach","val","key","standardRequestConfigItem","cfg","result","undefined","axiosOps","standardOptions","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","isFunction","isPlainObject","stages","check","feature","checkData","resolve","process","checkResult","checker","stage","util","Feature","handler","beforeReject","toLowerCase","indexOf","self","args","from","Promise","reject","apply","data","isCancel","map","authOps","featureOptions","auth","getIAxiosOptionItem","requestName","requestArgs","onUnAuth","validatorFeature","requestConfig","vsAll","vsConfig","validator","vsRequest","push","execValidators","concat","enabled","all","itemResult","datas","checkHanlder","onUnValid","validatorData","dataMap","find","senderFeature","iaxios","ajaxOptions","getUrl","computedUrl","url","trim","res","cancelTokenSource","CancelToken","source","cancelToken","token","requestModel","method","params","request","defaultConvert","getConvert","convert","Process","stack","otherOptions","CancelPromise","executor","p","__proto__","cancel","promise","orgFeatures","filter","f","featureInstances","use","next","exec","state","featureIns","requiredResolve","breforeResolve","configProp","sendOptions","getOptionItem","standardConfig","shift","bind","headers","rejectDataMap","IAxios","id","Math","random","replace","create","setOptions","iaxiosIns","model","run","preOptions","splice","vals","defaultIAxiosOptions","v","reverse","lastIndexOf","arr","some","createRequest","defaultIAxios","version"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACO,IAAIA,mBAAmB,SAAnBA,gBAAmB,MAAO;WAC1BC,GAAGC,SAAH,CAAaC,GAAb,EAAkB,EAAEC,aAAa,UAAf,EAAlB,CAAP,CADiC;CAA9B;AAGP,AAAO,IAAIC,gBAAgB,SAAhBA,aAAgB,MAAO;WACvBJ,GAAGC,SAAH,CAAaC,GAAb,CAAP;CADG;;AAIP,AAAO,IAAIG,YAAY,SAAZA,SAAY,MAAO;WACnBH,OAAOA,IAAII,IAAX,IAAmBJ,IAAIK,KAA9B;CADG;;AAIP;;AAIA,AAAO,IAAIC,WAAW,SAAXA,QAAW,CAACC,OAAD,EAAUP,GAAV,EAAkB;QAChC;YACIQ,MAAM,IAAIC,QAAJ,CAAa,KAAb,EAAoB,+BAA+BF,OAA/B,GAAyC,iCAA7D,CAAV;eACOC,IAAIR,GAAJ,CAAP;KAFJ,CAGE,OAAOU,KAAP,EAAc;CAJb;;AAQP,AAAO,IAAIC,eAAe,SAAfA,YAAe,MAAO;QACzB,QAAOC,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;YACrBC,MAAM,SAANA,GAAM,OAAQ;mBACJC,IAAV;SADJ;YAGIF,IAAIG,cAAJ,CAAmB,UAAnB,KAAkCC,QAAOJ,IAAIK,QAAX,MAAwB,QAA9D,EAAwE;kBAC9D,IAAIC,SAAJ,CAAcL,IAAI,kBAAJ,CAAd,CAAN;;YAEAD,IAAIG,cAAJ,CAAmB,mBAAnB,KAA2CC,QAAOJ,IAAIO,iBAAX,MAAiC,QAAhF,EAA0F;kBAChF,IAAID,SAAJ,CAAcL,IAAI,2BAAJ,CAAd,CAAN;;YAEAD,IAAIG,cAAJ,CAAmB,OAAnB,KAA+BC,QAAOJ,IAAIQ,KAAX,MAAqB,QAAxD,EAAkE;kBACxD,IAAIF,SAAJ,CAAcL,IAAI,eAAJ,CAAd,CAAN;;YAEAD,IAAIG,cAAJ,CAAmB,YAAnB,KAAoCC,QAAOJ,IAAIS,UAAX,MAA0B,QAAlE,EAA4E;kBAClE,IAAIH,SAAJ,CAAcL,IAAI,oBAAJ,CAAd,CAAN;;YAEAD,IAAIG,cAAJ,CAAmB,UAAnB,KAAkCC,QAAOJ,IAAIU,QAAX,MAAwB,QAA9D,EAAwE;kBAC9D,IAAIJ,SAAJ,CAAcL,IAAI,kBAAJ,CAAd,CAAN;;;CAlBL;;AAuBP,AAAO,IAAIU,sBAAsB,SAAtBA,mBAAsB,OAAQ;QACjCC,EAAJ;QACI,QAAOV,IAAP,yCAAOA,IAAP,OAAgB,QAApB,EAA8B;aACrBA,IAAL;KADJ,MAEO,IAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;aAC9B;qBACQA;SADb;KADG,MAIA;aACE;qBACQA;SADb;;WAIGU,EAAP;CAbG;;AAgBP,AAAO,IAAIC,0BAA0B,SAA1BA,uBAA0B,MAAO;QACpCb,OAAOI,QAAOJ,IAAIK,QAAX,MAAwB,QAAnC,EAA6C;eAClCS,IAAP,CAAYd,IAAIK,QAAhB,EAA0BU,OAA1B,CAAkC,eAAO;gBACjCC,MAAMhB,IAAIK,QAAJ,CAAaY,GAAb,CAAV;gBACI,OAAOD,GAAP,KAAe,WAAf,IAA8BA,OAAO,IAAzC,EAA+C;uBACpChB,IAAIK,QAAJ,CAAaY,GAAb,CAAP;aADJ,MAEO,IAAI,OAAOD,GAAP,KAAe,SAAnB,EAA8B;oBAC7BX,QAAJ,CAAaY,GAAb,IAAoB;6BACPD;iBADb;;SALR;;WAWGhB,GAAP;CAbG;;AAgBP,AAAO,IAAIkB,4BAA4B,SAA5BA,yBAA4B,CAACC,GAAD,EAAS;QACxC,CAACA,GAAL,EAAU;QACN,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;gCACDA,GAAxB;YACIC,SAAS;sBACCD,IAAId,QADL;sBAECc,IAAIT,QAAJ,IAAgB,EAFjB;+BAGUW,SAHV;mBAIFA,SAJE;wBAKGA;SALhB;YAOIC,WAAW,EAPf;;eASOR,IAAP,CAAYK,GAAZ,EAAiBJ,OAAjB,CAAyB,gBAAQ;gBACzB,CAACK,OAAOjB,cAAP,CAAsBD,IAAtB,CAAL,EAAkC;yBACrBA,IAAT,IAAiBiB,IAAIjB,IAAJ,CAAjB;;SAFR;eAKOM,KAAP,GAAec,QAAf;eACOF,MAAP;;WAEGD,GAAP;CArBG;;AAwBP,AAAO,IAAII,kBAAkB,SAAlBA,eAAkB,CAACvB,GAAD,EAAS;QAC9B,CAACA,GAAD,IAAQ,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAvB,IAAmCA,QAAQ,IAA/C,EAAqD;4BAC7BA,GAAxB;WACOA,GAAP;CAHG;;;AAOP,AAAO,IAAIwB,SAAS,SAATA,MAAS,GAAY;QACxBC,OAAJ;QAAaC,IAAb;QAAmBC,GAAnB;QAAwBC,IAAxB;QAA8BC,WAA9B;QAA2CC,KAA3C;QAAkDC,SAASC,UAAU,CAAV,KAAgB,EAA3E;QACIC,IAAI,CADR;QAEIC,SAASF,UAAUE,MAFvB;QAGIC,OAAO,KAHX;QAIIC,WAAWC,OAAOC,SAAP,CAAiBF,QAJhC;QAKIG,SAASF,OAAOC,SAAP,CAAiBnC,cAL9B;QAMIqC,aAAa;4BACW,SADX;2BAEU,QAFV;2BAGU,QAHV;6BAIY,UAJZ;0BAKS,OALT;yBAMQ,MANR;2BAOU,QAPV;2BAQU;KAd3B;QAgBIC,SAAS;oBACO,oBAAUrD,GAAV,EAAe;mBAChBqD,OAAOC,IAAP,CAAYtD,GAAZ,MAAqB,UAA5B;SAFC;iBAIIuD,MAAMC,OAAN,IACT,UAAUxD,GAAV,EAAe;mBACJqD,OAAOC,IAAP,CAAYtD,GAAZ,MAAqB,OAA5B;SANC;kBAQK,kBAAUA,GAAV,EAAe;mBACdA,OAAO,IAAP,IAAeA,OAAOA,IAAIyD,MAAjC;SATC;mBAWM,mBAAUzD,GAAV,EAAe;mBACf,CAAC0D,MAAMC,WAAW3D,GAAX,CAAN,CAAD,IAA2B4D,SAAS5D,GAAT,CAAlC;SAZC;cAcC,cAAUA,GAAV,EAAe;mBACVA,OAAO,IAAP,GAAc6D,OAAO7D,GAAP,CAAd,GAA4BoD,WAAWJ,SAASc,IAAT,CAAc9D,GAAd,CAAX,KAAkC,QAArE;SAfC;uBAiBU,uBAAUA,GAAV,EAAe;gBACtB,CAACA,GAAD,IAAQqD,OAAOC,IAAP,CAAYtD,GAAZ,MAAqB,QAA7B,IAAyCA,IAAI+D,QAAjD,EAA2D;uBAChD,KAAP;;gBAEA;oBACI/D,IAAIgE,WAAJ,IAAmB,CAACb,OAAOW,IAAP,CAAY9D,GAAZ,EAAiB,aAAjB,CAApB,IAAuD,CAACmD,OAAOW,IAAP,CAAY9D,IAAIgE,WAAJ,CAAgBd,SAA5B,EAAuC,eAAvC,CAA5D,EAAqH;2BAC1G,KAAP;;aAFR,CAIE,OAAOe,CAAP,EAAU;uBACD,KAAP;;gBAEApC,GAAJ;iBACKA,GAAL,IAAY7B,GAAZ,EAAiB;mBACV6B,QAAQI,SAAR,IAAqBkB,OAAOW,IAAP,CAAY9D,GAAZ,EAAiB6B,GAAjB,CAA5B;;KA9CZ;QAiDI,OAAOc,MAAP,KAAkB,SAAtB,EAAiC;eACtBA,MAAP;iBACSC,UAAU,CAAV,KAAgB,EAAzB;YACI,CAAJ;;QAEA,QAAOD,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,IAA8B,CAACU,OAAOa,UAAP,CAAkBvB,MAAlB,CAAnC,EAA8D;iBACjD,EAAT;;QAEAG,WAAWD,CAAf,EAAkB;iBACL,IAAT;UACEA,CAAF;;SAECA,CAAL,EAAQA,IAAIC,MAAZ,EAAoBD,GAApB,EAAyB;YACjB,CAACR,UAAUO,UAAUC,CAAV,CAAX,KAA4B,IAAhC,EAAsC;iBAC7BP,IAAL,IAAaD,OAAb,EAAsB;sBACZM,OAAOL,IAAP,CAAN;uBACOD,QAAQC,IAAR,CAAP;oBACIK,WAAWH,IAAf,EAAqB;;;oBAGjBO,QAAQP,IAAR,KAAiBa,OAAOc,aAAP,CAAqB3B,IAArB,MAA+BC,cAAcY,OAAOG,OAAP,CAAehB,IAAf,CAA7C,CAAjB,CAAJ,EAA0F;wBAClFC,WAAJ,EAAiB;sCACC,KAAd;gCACQF,OAAOc,OAAOG,OAAP,CAAejB,GAAf,CAAP,GAA6BA,GAA7B,GAAmC,EAA3C;qBAFJ,MAGO;gCACKA,OAAOc,OAAOc,aAAP,CAAqB5B,GAArB,CAAP,GAAmCA,GAAnC,GAAyC,EAAjD;;;2BAGGD,IAAP,IAAeF,OAAOW,IAAP,EAAaL,KAAb,EAAoBF,IAApB,CAAf;iBARJ,MASO,IAAIA,SAASP,SAAb,EAAwB;2BACpBK,IAAP,IAAeE,IAAf;;;;;WAKTG,MAAP;CArFG;;AC3GP,IAAMyB,SAAS,CAAC,QAAD,EAAW,SAAX,EAAsB,OAAtB,CAAf;;AAEA,IAAIC,QAAQ,SAARA,KAAQ,CAACC,OAAD,EAAUC,SAAV,EAAqBC,OAArB,EAA8BC,OAA9B,EAA0C;QAC9CC,cAAcJ,QAAQK,OAAR,CAAgBJ,SAAhB,EAA2BE,OAA3B,CAAlB;QACIG,QAAWN,QAAQM,KAAnB,SAA4BN,QAAQhC,IADxC;QAEIuC,SAAA,CAAeH,WAAf,CAAJ,EAAiC;oBACjBtE,IAAZ,CAAiB,kBAAU;oBACf;uBACG4B,SAAS,SAAT,GAAqB,QADxB;uBAEG4C,KAFH;sBAGEL;aAHV;SADJ,EAMGlE,KANH,CAMS,iBAAS;oBACN;uBACG,QADH;uBAEGuE,KAFH;sBAGEL;aAHV;SAPJ;KADJ,MAcO;gBACK;mBACGG,cAAc,SAAd,GAA0B,QAD7B;mBAEGE,KAFH;kBAGEL;SAHV;;CAlBR;;IA2BMO;qBACUxC,IAAZ,EAAkBsC,KAAlB,EAAyBG,OAAzB,EAAkCJ,OAAlC,EAA2CK,YAA3C,EAAyD;;;gBAC7CJ,SAAS,EAAjB;gBACQA,MAAMK,WAAN,EAAR;aACK3C,IAAL,GAAYA,IAAZ;aACKsC,KAAL,GAAaR,OAAOc,OAAP,CAAeN,KAAf,KAAyB,CAAC,CAA1B,GAA8BA,KAA9B,GAAsC,QAAnD;aACKG,OAAL,GAAeA,OAAf;aACKJ,OAAL,GAAe,OAAOA,OAAP,KAAmB,UAAnB,GAAgCA,OAAhC,GAA0C,UAAU3C,MAAV,EAAkB;mBAChEA,MAAP;SADJ;aAGKgD,YAAL,GAAoB,OAAOA,YAAP,KAAwB,UAAxB,GAAqCA,YAArC,GAAoD,YAAY,EAApF;;;;;6BAGCP,SAAS;gBACNU,OAAO,IAAX;gBACIC,OAAO7B,MAAM8B,IAAN,CAAWzC,SAAX,CADX;mBAEO,IAAI0C,OAAJ,CAAY,UAACd,OAAD,EAAUe,MAAV,EAAqB;oBAChCvD,SAASmD,KAAKJ,OAAL,CAAaS,KAAb,CAAmBL,IAAnB,EAAyBC,IAAzB,CAAb;oBACIR,QAAWO,KAAKP,KAAhB,SAAyBO,KAAK7C,IADlC;oBAEIuC,SAAA,CAAe7C,MAAf,CAAJ,EAA4B;2BACjB5B,IAAP,CAAY,gBAAQ;8BACV+E,IAAN,EAAYM,IAAZ,EAAkBjB,OAAlB,EAA2BC,OAA3B;qBADJ,EAEGpE,KAFH,CAES,iBAAS;4BACVe,MAAMsE,QAAN,CAAehF,KAAf,CAAJ,EAA2B;oCACf,QAAR;;gCAEI;mCACG,QADH;mCAEGkE,KAFH;kCAGElE;yBAHV;qBANJ;iBADJ,MAaO;0BACGyE,IAAN,EAAYnD,MAAZ,EAAoBwC,OAApB,EAA6BC,OAA7B;;aAjBD,CAAP;;;;;;AAuBRK,QAAQa,GAAR,GAAc,EAAd;;;AAIAb,QAAQa,GAAR,CAAY,MAAZ,IAAsB,IAAIb,OAAJ,CAAY,MAAZ,EAAoB,QAApB,EAA8B,UAAUL,OAAV,EAAmB;QAC/DmB,UAAUnB,QAAQoB,cAAR,CAAuBC,IAArC;QACIF,WAAW,OAAOA,QAAQb,OAAf,KAA2B,UAA1C,EAAsD;eAC3Ca,QAAQb,OAAR,CAAgBN,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAAhB,EAA4FvB,QAAQwB,WAApG,CAAP;KADJ,MAEO;eACI,IAAP;;CALc,EAOnB,IAPmB,EAOb,UAAUxB,OAAV,EAAmB;QACpBmB,UAAUnB,QAAQoB,cAAR,CAAuBC,IAArC;QACI,OAAOF,QAAQM,QAAf,KAA4B,UAAhC,EAA4C;gBAChCA,QAAR,CAAiBzB,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAAjB,EAA6FvB,QAAQwB,WAArG;;CAVc,CAAtB;;;AAeA,IAAIE,mBAAmB,IAAIrB,OAAJ,CAAY,WAAZ,EAAyB,QAAzB,EAAmC,UAAUL,OAAV,EAAmB;QACrE2B,gBAAgB3B,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAApB;QACIK,QAAQ5B,QAAQsB,mBAAR,CAA4B,YAA5B,CADZ;QAEIO,WAAW7B,QAAQoB,cAAR,CAAuBU,SAFtC;QAGIC,YAAYH,MAAM5B,QAAQuB,WAAd,CAHhB;;qBAIqB,EAJrB;;QAMI,OAAOQ,SAAP,KAAqB,UAAzB,EAAqC;uBAClBC,IAAf,CAAoBD,SAApB;KADJ,MAEO,IAAIjD,MAAMC,OAAN,CAAcgD,SAAd,CAAJ,EAA8B;yBAChBE,eAAeC,MAAf,CAAsBH,SAAtB,CAAjB;;QAEA,OAAOF,QAAP,KAAoB,UAAxB,EAAoC;uBACjBG,IAAf,CAAoBH,QAApB;KADJ,MAEO,IAAI/C,MAAMC,OAAN,CAAc8C,QAAd,CAAJ,EAA6B;yBACfI,eAAeC,MAAf,CAAsBL,QAAtB,CAAjB;KADG,MAEA,IAAI,QAAOA,QAAP,yCAAOA,QAAP,OAAoB,QAApB,IAAgCA,SAASM,OAAzC,IAAoDN,SAASjF,UAAjE,EAA6E;yBAC/DqF,eAAeC,MAAf,CAAsBL,SAASjF,UAAT,IAAuB,EAA7C,CAAjB;;;WAGGiE,QAAQuB,GAAR,CAAYH,eAAef,GAAf,CAAmB,gBAAQ;YACtCmB,aAAahG,KAAKsF,aAAL,EAAoB3B,QAAQwB,WAA5B,CAAjB;YACIpB,SAAA,CAAeiC,UAAf,CAAJ,EAAgC;mBACrBA,UAAP;SADJ,MAEO;mBACIxB,QAAQd,OAAR,CAAgBsC,UAAhB,CAAP;;KALW,CAAZ,CAAP;CApBmB,EA4BpB,UAAUC,KAAV,EAAiBtC,OAAjB,EAA0B;QACrB6B,WAAW7B,QAAQoB,cAAR,CAAuBU,SAAtC;QACIS,eAAeV,SAASU,YAD5B;QAEI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;eAC7BA,aAAaD,KAAb,CAAP;KADJ,MAEO;eACI,IAAP;;CAlCe,EAoCpB,UAAUtC,OAAV,EAAmB;QACd6B,WAAW7B,QAAQoB,cAAR,CAAuBU,SAAtC;QACIU,YAAYX,SAASW,SADzB;QAEI,OAAOA,SAAP,KAAqB,UAAzB,EAAqC;YAC7BC,gBAAgBzC,QAAQ0C,OAAR,CAAgBC,IAAhB,CAAqB;mBAAQtG,KAAK8D,KAAL,KAAe,kBAAvB;SAArB,CAApB;eACOqC,UAAUC,gBAAgBA,cAAczB,IAA9B,GAAqCxD,SAA/C,CAAP;;CAzCe,CAAvB;AA4CA6C,QAAQa,GAAR,CAAYQ,iBAAiB7D,IAA7B,IAAqC6D,gBAArC;;;AAGA,IAAMkB,gBAAgB,IAAIvC,OAAJ,CAAY,QAAZ,EAAsB,SAAtB,EAAiC,UAAUL,OAAV,EAAmB;QAClE6C,SAAS7C,QAAQ6C,MAArB;QACItB,cAAcvB,QAAQuB,WAD1B;QAEII,gBAAgB3B,QAAQsB,mBAAR,0BAAkDC,WAAlD,SAFpB;QAGIuB,cAAc9C,QAAQsB,mBAAR,CAA4B,OAA5B,CAHlB;QAIIzE,WAAWmD,QAAQsB,mBAAR,YAJf;;;QAOI,OAAOzE,SAASkG,MAAhB,KAA2B,UAA/B,EAA2C;YACnCC,cAAcnG,SAASkG,MAAT,CAAgBpB,aAAhB,CAAlB;YACIqB,WAAJ,EAAiB;wBACDC,GAAZ,GAAkBD,cAAc,EAAhC;SADJ,MAEO;wBACSC,GAAZ,GAAkBtB,cAAcsB,GAAhC;;;QAGJ,CAACH,YAAYG,GAAb,IAAoB7D,OAAOX,SAAP,CAAiByE,IAAjB,CAAsB7D,IAAtB,CAA2ByD,YAAYG,GAAvC,MAAgD,EAAxE,EAA4E;oBAC5DA,GAAZ,GAAkB1B,cAAc,EAAhC;;;kBAGUrB,OAAd,GAAwB,UAAUiD,GAAV,EAAe;eAC5B,CAACnD,QAAQsB,mBAAR,CAA4B,sBAA5B,KAAuD,YAAY;mBAAS,IAAP;SAAtE,EAAqF6B,GAArF,CAAP;KADJ;;;QAKIC,oBAAoBzG,MAAM0G,WAAN,CAAkBC,MAAlB,EAAxB;gBACYC,WAAZ,GAA0BH,kBAAkBI,KAA5C;QACIC,eAAezD,QAAQwB,WAAR,IAAuBxB,QAAQwB,WAAR,CAAoBnD,MAApB,GAA6B,CAApD,GAAwD2B,QAAQwB,WAAR,CAAoB,CAApB,CAAxD,GAAiF,EAApG;QACIsB,YAAYY,MAAZ,KAAuB,KAA3B,EAAkC;oBAClBC,MAAZ,GAAqBb,YAAYa,MAAZ,IAAsB,EAA3C;YACIpH,QAAOuG,YAAYa,MAAnB,MAA8B,QAAlC,EAA4C;kBACxC,CAAY,IAAZ,EAAkBb,YAAYa,MAA9B,EAAsCF,YAAtC;SADJ,MAEO,IAAI,OAAOX,YAAYa,MAAnB,KAA8B,QAAlC,EAA4C;wBACnCA,MAAZ,IAAsB,MAAMvD,gBAAA,CAAsBqD,YAAtB,CAA5B;;KALR,MAOO;oBACSzC,IAAZ,GAAmB8B,YAAY9B,IAAZ,IAAoB,EAAvC;YACIzE,QAAOuG,YAAY9B,IAAnB,MAA4B,QAAhC,EAA0C;kBACtC,CAAY,IAAZ,EAAkB8B,YAAY9B,IAA9B,EAAoCyC,YAApC;SADJ,MAEO,IAAI,OAAOX,YAAY9B,IAAnB,KAA4B,QAAhC,EAA0C;wBACjCA,IAAZ,IAAoB,MAAMZ,aAAA,CAAmBqD,YAAnB,CAA1B;;;YAGAF,WAAR,GAAsBH,iBAAtB;;;WAGOP,OAAOlG,KAAP,CAAaiH,OAAb,CAAqBd,WAArB,CAAP;CA9CkB,CAAtB;AAgDAzC,QAAQa,GAAR,CAAY0B,cAAc/E,IAA1B,IAAkC+E,aAAlC;;ACpLA,IAAIiB,iBAAiB,SAAjBA,cAAiB,OAAQ;WAClB7C,IAAP;CADJ;;AAIA,IAAI8C,aAAa,SAAbA,UAAa,CAACjG,IAAD,EAAOmC,OAAP,EAAmB;QAC5B+D,UAAU/D,QAAQsB,mBAAR,CAA4B,cAAczD,IAA1C,CAAd;cACU,OAAOkG,OAAP,KAAmB,UAAnB,GAAgCA,OAAhC,GAA0CF,cAApD;WACOE,OAAP;CAHJ;;IAMqBC;uBACH;;;aACLC,KAAL,GAAa,EAAb;aACKpB,MAAL,GAAc,IAAd;aACKqB,YAAL,GAAoB,IAApB;aACK3C,WAAL,GAAmB,EAAnB;aACKC,WAAL,GAAmB,IAAnB;aACKP,QAAL,GAAgB,KAAhB;aACKyB,OAAL,GAAe,EAAf;aACKa,WAAL,GAAmB,IAAnB;;;;;8BAGE;;gBAEEvD,UAAU,IAAd;;qBAESmE,aAAT,CAAuBC,QAAvB,EAAiC;oBACzBC,IAAI,IAAIxD,OAAJ,CAAY,UAAUd,OAAV,EAAmBe,MAAnB,EAA2B;;2BAEpCsD,SAASrE,OAAT,EAAkBe,MAAlB,CAAP;iBAFI,CAAR;;kBAKEwD,SAAF,GAAcH,cAAc1F,SAA5B;uBACO4F,CAAP;;0BAEUC,SAAd,GAA0BzD,OAA1B;0BACcpC,SAAd,CAAwB6F,SAAxB,GAAoCzD,QAAQpC,SAA5C;0BACcA,SAAd,CAAwB8F,MAAxB,GAAiC,UAAUvD,IAAV,EAAgB;uBACtChB,QAAQuE,MAAR,CAAevD,IAAf,CAAP;aADJ;;gBAKIwD,UAAU,IAAIL,aAAJ,CAAkB,UAACpE,OAAD,EAAUe,MAAV,EAAqB;oBAC7C2D,cAAczE,QAAQsB,mBAAR,CAA4B,UAA5B,CAAlB;oBACIrE,OAAOuB,OAAOvB,IAAP,CAAYwH,WAAZ,EAAyBC,MAAzB,CAAgC,gBAAQ;wBAC3CC,IAAIF,YAAY5G,IAAZ,CAAR;2BACO,CAAC,CAAC8G,EAAExC,OAAX,CAF+C;iBAAxC,CAAX;oBAII3F,WAAWS,KAAKiE,GAAL,CAAS,gBAAQ;2BACrBb,QAAQa,GAAR,CAAYrD,IAAZ,CAAP;iBADW,EAEZ6G,MAFY,CAEL,aAAK;2BACJ,CAAC,CAACC,CAAT;iBAHW,CAAf;yBAKS3C,IAAT,CAAc3B,QAAQa,GAAR,CAAY,QAAZ,CAAd;2BACW1E,SAASkI,MAAT,CAAgB;2BAAKC,EAAExE,KAAF,KAAY,QAAjB;iBAAhB,EAA2C+B,MAA3C,CAAkD1F,SAASkI,MAAT,CAAgB;2BAAKC,EAAExE,KAAF,KAAY,SAAjB;iBAAhB,CAAlD,EAA+F3D,SAASkI,MAAT,CAAgB;2BAAKC,EAAExE,KAAF,KAAY,OAAjB;iBAAhB,CAA/F,CAAX;;;wBAGQyE,gBAAR,GAA2BpI,QAA3B;wBACQ4E,cAAR,GAAyBqD,WAAzB;;yBAGSvH,OAAT,CAAiB,sBAAc;4BACnB2H,GAAR,CAAY,UAAUC,IAAV,EAAgB;4BACpB9E,QAAQiB,QAAZ,EAAsB;mCACX6C,WAAW,eAAX,EAA4B9D,OAA5B,EAAqCA,QAAQ0C,OAA7C,EAAsD1C,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAAtD,CAAP;;;;mCAIOwD,IAAX,CAAgB/E,OAAhB,EAAyBrE,IAAzB,CAA8B,gBAAQ;oCAC1B+G,OAAR,CAAgBV,IAAhB,CAAqBhB,IAArB;gCACIA,KAAKgE,KAAL,KAAe,SAAnB,EAA8B;oCACtBC,WAAWC,eAAf,EAAgC;wCACxB,OAAOD,WAAWE,cAAlB,KAAqC,UAAzC,EAAqD;mDACtCA,cAAX,CAA0BnF,OAA1B;;4CAEI8D,WAAW,gBAAX,EAA6B9D,OAA7B,EAAsCgB,KAAKA,IAA3C,EAAiDhB,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAAjD,CAAR;iCAJJ,MAKO;wCACCvB,QAAQiE,KAAR,CAAc5F,MAAd,GAAuB,CAA3B,EAA8B;;qCAA9B,MAEO;gDACKyF,WAAW,gBAAX,EAA6B9D,OAA7B,EAAsCgB,KAAKA,IAA3C,EAAiDhB,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAAjD,CAAR;;;6BAVZ,MAaO;oCACC,OAAO0D,WAAW1E,YAAlB,KAAmC,UAAvC,EAAmD;+CACpCA,YAAX,CAAwBP,OAAxB;;uCAEG8D,WAAW,eAAX,EAA4B9D,OAA5B,EAAqCA,QAAQ0C,OAA7C,EAAsD1C,QAAQsB,mBAAR,0BAAkDtB,QAAQuB,WAA1D,SAAtD,CAAP;;yBAnBR;qBANJ;iBADJ;wBA+BQuD,IAAR;aAlDU,CAAd;mBAoDON,OAAP;;;;+BAGGxD,MAAM;gBACL,KAAKC,QAAT,EAAmB;iBACdA,QAAL,GAAgB,IAAhB;gBACI,KAAKsC,WAAT,EAAsB;qBACbA,WAAL,CAAiBgB,MAAjB,CAAwBvD,IAAxB;;;;;4CAIYlF,SAAS;gBACrBsJ,sCAAmC,KAAK7D,WAAxC,QAAJ;gBACI8D,cAAc,KAAK7D,WAAL,CAAiBnD,MAAjB,GAA0B,CAA1B,GAA8B,KAAKmD,WAAL,CAAiB,KAAKA,WAAL,CAAiBnD,MAAjB,GAA0B,CAA3C,CAA9B,GAA8Eb,SADhG;gBAEI0G,eAAe,KAAKA,YAFxB;gBAGIkB,cAActJ,OAAlB,EAA2B;uBAChB,KAAK+G,MAAL,CAAYyC,aAAZ,CAA0BxJ,OAA1B,EAAmCuJ,WAAnC,EAAgDnB,YAAhD,CAAP;aADJ,MAEO;oBACCvC,gBAAgB,KAAKL,mBAAL,CAAyB8D,UAAzB,CAApB;oBACIG,iBAAiBnF,yBAAA,CAA+BuB,aAA/B,CADrB;uBAEO,KAAKkB,MAAL,CAAYyC,aAAZ,CAA0BjG,IAA1B,CAA+B,KAAKwD,MAApC,EAA4C/G,OAA5C,EAAqDuJ,WAArD,EAAkEnB,YAAlE,EAAgF,QAAOqB,cAAP,yCAAOA,cAAP,OAA0B,QAA1B,GAAqCA,cAArC,GAAsD/H,SAAtI,CAAP;;;;;4BAIJ8C,SAAS;gBACL,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;iBAC9B2D,KAAL,CAAWjC,IAAX,CAAgB1B,OAAhB;;;;+BAGG;gBACCjE,OAAO,KAAK4H,KAAL,CAAWuB,KAAX,EAAX;gBACInJ,IAAJ,EAAU;qBACD,KAAKyI,IAAL,CAAUW,IAAV,CAAe,IAAf,CAAL;;;;;;;AClIZ,2BAAe;uBACQ,EADR;WAEJ;;gBAEK,KAFL;0BAGerF,gBAHf;iBAIM;oBACG;gCACY;aAFf;kBAIC;gCACc;;SATrB;0BAYe,CAAC,UAAUY,IAAV,EAAgB0E,OAAhB,EAAyB;mBACjCtF,aAAA,CAAmBY,IAAnB,CAAP;SADc;KAdX;gBAkBC,EAlBD;cAmBD;cACA;qBACO;SAFP;eAIC;qBACM;SALP;mBAOK;qBACE,KADF;SAPL,EAnBC;cA8BD;;cAAA,kBAECW,aAFD,EAEgB;mBACXA,cAAcsB,GAArB;SAHE;;;mBAAA,uBAMME,GANN,EAMWxB,aANX,EAM0B;mBACrBwB,OAAOA,IAAInC,IAAX,GAAkB,IAAlB,GAAyB,KAAhC;SAPE;;;sBAAA,0BAUSmC,GAVT,EAUcxB,aAVd,EAU6B;mBACxBwB,IAAInC,IAAX;SAXE;;;qBAAA,yBAcQ2E,aAdR,EAcuBhE,aAdvB,EAcsC;mBACjCgE,aAAP;;;CA7CZ;;ACKA;;;;;;;;;;;;;IAaMC;oBACUzJ,GAAZ,EAAiB;;;aACR0J,EAAL,GAAU,CAACC,KAAKC,MAAL,KAAgB,EAAjB,EAAqBC,OAArB,CAA6B,IAA7B,EAAmC,EAAnC,CAAV;eACO9E,GAAP,CAAW,KAAK2E,EAAhB,IAAsB,IAAtB;;;aAGKlJ,KAAL,GAAaA,MAAMsJ,MAAN,EAAb;;aAEKrI,OAAL,GAAe,EAAf;aACKsI,UAAL,CAAgB/J,GAAhB;;;;;sCAEUoF,aAAa2C,cAAc;gBACjCiC,YAAY,IAAhB;;mBAEO,SAASvC,OAAT,CAAiBwC,KAAjB,EAAwBjK,GAAxB,EAA6B;oBAC5BqF,cAAc1C,MAAM8B,IAAN,CAAWzC,SAAX,CAAlB;oBACI6B,UAAU,IAAIgE,OAAJ,EADd;wBAEQnB,MAAR,GAAiBsD,SAAjB;wBACQjC,YAAR,GAAuBA,YAAvB;wBACQ3C,WAAR,GAAsBA,WAAtB;wBACQC,WAAR,GAAsBA,WAAtB;wBACQP,QAAR,GAAmB,KAAnB;wBACQyB,OAAR,GAAkB,EAAlB;wBACQa,WAAR,GAAsB,IAAtB;;uBAEOvD,QAAQqG,GAAR,EAAP;aAXJ;;;;mCAcOlK,KAAK;gBACR,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;4BACzB,CAAkBA,GAAlB;uCACA,CAA6BA,GAA7B;sBACA,CAAY,IAAZ,EAAkB,KAAKyB,OAAvB,EAAgCzB,GAAhC;;;;;sCAGMiB,KAAK;gBACX,CAACA,GAAL,EAAU;;gBAENkJ,aAAanI,UAAUE,MAAV,GAAmB,CAAnB,GAAuBS,MAAM8B,IAAN,CAAWzC,SAAX,EAAsBoI,MAAtB,CAA6B,CAA7B,EAAgCpI,UAAUE,MAAV,GAAmB,CAAnD,CAAvB,GAA+E,EAAhG;;gBAEImI,OAAO,EAAX;gBACIF,WAAWjI,MAAX,GAAoB,CAAxB,EAA2B;2BACZnB,OAAX,CAAmB,gBAAQ;wBACnBb,IAAJ,EAAUmK,KAAKxE,IAAL,CAAU5B,QAAA,CAAchD,GAAd,EAAmBgD,eAAA,CAAqB/D,IAArB,CAAnB,CAAV;iBADd;;iBAIC2F,IAAL,CAAU5B,QAAA,CAAchD,GAAd,EAAmB,KAAKQ,OAAxB,CAAV;iBACKoE,IAAL,CAAU5B,QAAA,CAAchD,GAAd,EAAmBqJ,oBAAnB,CAAV;mBACOD,KAAK9B,MAAL,CAAY,aAAK;uBACb,OAAOgC,CAAP,KAAa,WAAb,IAA4BA,KAAK,IAAxC;aADG,CAAP;;gBAIIvJ,GAAJ;;gBAEIqJ,KAAKnI,MAAL,GAAc,CAAlB,EAAqB;oBACbjB,QAAQ,UAAZ,EAAwB;wBAChBb,QAAOiK,KAAK,CAAL,CAAP,KAAkB,QAAtB,EAAgC;8BACtBA,KAAK,CAAL,CAAN;qBADJ,MAEO;8BACGpG,MAAA,CAAYW,KAAZ,CAAkB,IAAlB,EAAwB,CAAC,IAAD,EAAO,EAAP,EAAWmB,MAAX,CAAkBsE,KAAKG,OAAL,EAAlB,CAAxB,CAAN;+BACO1J,IAAP,CAAYE,GAAZ,EAAiB+D,GAAjB,CAAqB,aAAK;gCAClBwF,CAAJ,IAAStG,mBAAA,CAAyBjD,IAAIuJ,CAAJ,CAAzB,CAAT;yBADJ;;iBALR,MASO,IAAItJ,IAAIqD,OAAJ,CAAY,WAAZ,KAA4B,CAA5B,IAAiCrD,IAAIwJ,WAAJ,CAAgB,GAAhB,MAAyBxJ,IAAIiB,MAAJ,GAAa,CAA3E,EAA8E;wBAC7EjB,IAAIqD,OAAJ,CAAY,GAAZ,MAAqBrD,IAAIwJ,WAAJ,CAAgB,GAAhB,CAAzB,EAA+C;4BACvC,OAAOJ,KAAK,CAAL,CAAP,KAAmB,SAAnB,IAAgCA,KAAK,CAAL,MAAY,KAAhD,EAAuD;kCAC7C;yCACO;6BADb;yBADJ,MAIO;gCACCK,MAAM,EAAV;iCACK3J,OAAL,CAAa,gBAAQ;oCACb8E,IAAJ,CAAS5B,mBAAA,CAAyB/D,IAAzB,CAAT;6BADJ;kCAGM+D,MAAA,CAAYW,KAAZ,CAAkB,IAAlB,EAAwB,CAAC,IAAD,EAAO,EAAP,EAAWmB,MAAX,CAAkB2E,IAAIF,OAAJ,EAAlB,CAAxB,CAAN;;qBAVR,MAYO;8BACGH,KAAK7D,IAAL,CAAU,aAAK;mCACV,OAAO+D,CAAP,KAAa,WAAb,IAA4BA,KAAK,IAAxC;yBADE,CAAN;;iBAdD,MAkBA,IAAItJ,QAAQ,OAAZ,EAAqB;0BAClBgD,MAAA,CAAYW,KAAZ,CAAkB,IAAlB,EAAwB,CAAC,IAAD,EAAO,EAAP,EAAWmB,MAAX,CAAkBsE,KAAKG,OAAL,EAAlB,CAAxB,CAAN;iBADG,MAEA;wBACCH,KAAKM,IAAL,CAAU;+BAAQ,QAAOzK,IAAP,yCAAOA,IAAP,OAAgB,QAAxB;qBAAV,CAAJ,EAAiD;8BACvC+D,MAAA,CAAYW,KAAZ,CAAkB,IAAlB,EAAwB,CAAC,IAAD,EAAO,EAAP,EAAWmB,MAAX,CAAkBsE,KAAKG,OAAL,EAAlB,CAAxB,CAAN;qBADJ,MAEO;8BACGH,KAAK7D,IAAL,CAAU,aAAK;mCACV,OAAO+D,CAAP,KAAa,WAAb,IAA4BA,KAAK,IAAxC;yBADE,CAAN;;;;mBAMLvJ,GAAP;;;;+BAGUhB,KAAK;mBACR,IAAIyJ,MAAJ,CAAWzJ,GAAX,CAAP;;;;sCAEiBoF,aAAa2C,cAAc;mBACrC0B,OAAO1E,GAAP,CAAW,SAAX,EAAsB6F,aAAtB,CAAoCxF,WAApC,EAAiD2C,YAAjD,CAAP;;;;mCAEc/H,KAAK;gBACf,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;4BACzB,CAAkBA,GAAlB;uCACA,CAA6BA,GAA7B;sBACA,CAAY,IAAZ,EAAkBsK,oBAAlB,EAAwCtK,GAAxC;;;;;;;AAIZyJ,OAAO1E,GAAP,GAAa,EAAb;;AAEA,IAAI8F,gBAAgBpB,OAAOK,MAAP,EAApB;AACAe,cAAcnB,EAAd,GAAmB,SAAnB;AACAD,OAAO1E,GAAP,CAAW,SAAX,IAAwB8F,aAAxB;;AAEA,YAAe;YACHpB,OAAOK,MADJ;mBAEIL,OAAOmB,aAFX;gBAGCnB,OAAOM,UAHR;YAIHN,MAJG;aAKFqB;CALb;;;;;;;;"}