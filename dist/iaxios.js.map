{"version":3,"file":"iaxios.js","sources":["../src/util.js","../src/feature.js","../src/process.js","../src/options.js","../src/index.js"],"sourcesContent":["import Qs from 'qs';\nexport var paramsSerializer = obj => {\n    return Qs.stringify(obj, { arrayFormat: 'brackets' });//如何序列化params，params会拼接的url后面\n}\nexport var stringifyData = obj => {\n    return isString(obj) ? obj : Qs.stringify(obj);\n}\n\nexport var isPromise = obj => {\n    return obj && obj.then && obj.catch;\n}\n\nexport var isObject = obj => {\n    return typeof obj === 'object';\n}\nexport var isString = obj => {\n    return typeof obj === 'string';\n}\n\nexport var uniqueID = () => {\n    return (Math.random() + '').replace('0.', '');\n}\n\nexport var getValue = (propExp, obj) => {\n    try {\n        var fun = new Function('obj', 'var result;try{result=obj.' + propExp + ';}catch(error){};return result;');\n        return fun(obj);\n    } catch (error) {\n    }\n};\n\nvar regFormatString = /{([^}]*)}/g;\nexport var getFormatItems = (template = '') => {\n    const items = [];\n    let item;\n    while (item = regFormatString.exec(template)) {\n        items.push(item[1]);\n    }\n    return items;\n}\n\nexport var formatString = (template = '', values = {}) => {\n    return template.replace(regFormatString, function (match, key) {\n        return key in values ? values[key] : match;\n    });\n}\n\nexport var validOptions = ops => {\n    if (typeof ops === 'object') {\n        var msg = item => {\n            return `${item}必需是object类型`;\n        }\n        if (ops.hasOwnProperty('features') && typeof ops.features !== 'object') {\n            throw new TypeError(msg('options.features'));\n        }\n        if (ops.hasOwnProperty('requestConfigList') && typeof ops.requestConfigList !== 'object') {\n            throw new TypeError(msg('options.requestConfigList'));\n        }\n        if (ops.hasOwnProperty('axios') && typeof ops.axios !== 'object') {\n            throw new TypeError(msg('options.axios'));\n        }\n        if (ops.hasOwnProperty('validators') && typeof ops.validators !== 'object') {\n            throw new TypeError(msg('options.validators'));\n        }\n        if (ops.hasOwnProperty('handlers') && typeof ops.handlers !== 'object') {\n            throw new TypeError(msg('options.handlers'));\n        }\n    }\n}\n\nexport var standardAuthOptions = item => {\n    var vi;\n    if (typeof item === 'object') {\n        vi = item;\n    } else if (typeof item === 'function') {\n        vi = {\n            handler: item\n        };\n    } else {\n        vi = {\n            enabled: item\n        };\n    }\n    return vi;\n}\n\nexport var standardFeaturesOptions = ops => {\n    if (ops && typeof ops.features === 'object') {\n        Object.keys(ops.features).forEach(key => {\n            var val = ops.features[key];\n            if (typeof val === 'undefined' || val == null) {\n                delete ops.features[key];\n            } else if (typeof val === 'boolean') {\n                ops.features[key] = {\n                    enabled: val\n                }\n            }\n        })\n    }\n    return ops;\n}\n\nexport var transformJsonp = (content, callbackName) => {\n    var fun = new Function('var ' + callbackName + '=function(data){return data;}; return ' + callbackName + '(' + content + ');');\n    return fun();\n}\n\nexport var standardRequestConfigItem = (cfg) => {\n    if (!cfg) return;\n    if (typeof cfg === 'object') {\n        standardFeaturesOptions(cfg);\n        var result = {\n            features: cfg.features,\n            handlers: cfg.handlers || {},\n            requestConfigList: undefined,\n            axios: undefined,\n            validators: undefined\n        },\n            axiosOps = {};\n\n        Object.keys(cfg).forEach(item => {\n            if (!result.hasOwnProperty(item)) {\n                axiosOps[item] = cfg[item];\n            }\n        });\n        result.axios = axiosOps;\n        return result;\n    }\n    return cfg;\n}\n\nexport var standardOptions = (ops) => {\n    if (!ops || typeof ops !== 'object' || ops === null) return;\n    standardFeaturesOptions(ops);\n    return ops;\n}\n\n// jQuery版extend函数\nexport var extend = function () {\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\n        i = 1,\n        length = arguments.length,\n        deep = false,\n        toString = Object.prototype.toString,\n        hasOwn = Object.prototype.hasOwnProperty,\n        class2type = {\n            '[object Boolean]': 'boolean',\n            '[object Number]': 'number',\n            '[object String]': 'string',\n            '[object Function]': 'function',\n            '[object Array]': 'array',\n            '[object Date]': 'date',\n            '[object RegExp]': 'regexp',\n            '[object Object]': 'object'\n        },\n        jQuery = {\n            isFunction: function (obj) {\n                return jQuery.type(obj) === 'function'\n            },\n            isArray: Array.isArray ||\n                function (obj) {\n                    return jQuery.type(obj) === 'array'\n                },\n            isWindow: function (obj) {\n                return obj != null && obj == obj.window\n            },\n            isNumeric: function (obj) {\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\n            },\n            type: function (obj) {\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\n            },\n            isPlainObject: function (obj) {\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\n                    return false\n                }\n                try {\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\n                        return false\n                    }\n                } catch (e) {\n                    return false\n                }\n                var key;\n                for (key in obj) { }\n                return key === undefined || hasOwn.call(obj, key)\n            }\n        };\n    if (typeof target === 'boolean') {\n        deep = target;\n        target = arguments[1] || {};\n        i = 2;\n    }\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\n        target = {}\n    }\n    if (length === i) {\n        target = this;\n        --i;\n    }\n    for (i; i < length; i++) {\n        if ((options = arguments[i]) != null) {\n            for (name in options) {\n                src = target[name];\n                copy = options[name];\n                if (target === copy) {\n                    continue\n                }\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\n                    if (copyIsArray) {\n                        copyIsArray = false;\n                        clone = src && jQuery.isArray(src) ? src : []\n                    } else {\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\n                    }\n                    // WARNING: RECURSION\n                    target[name] = extend(deep, clone, copy);\n                } else if (copy !== undefined) {\n                    target[name] = copy;\n                }\n            }\n        }\n    }\n    return target;\n}\n","import axios from 'axios';\nimport * as util from './util.js';\n\nconst stages = ['before', 'sending', 'after'];\n\nvar check = (feature, checkData, resolve, process) => {\n    var checkResult = feature.checker(checkData, process),\n        stage = `${feature.stage}.${feature.name}`;\n    if (util.isPromise(checkResult)) {\n        checkResult.then(result => {\n            resolve({\n                state: result ? 'resolve' : 'reject',\n                stage: stage,\n                data: checkData\n            });\n        }).catch(() => {\n            resolve({\n                state: 'reject',\n                stage: stage,\n                data: checkData\n            });\n        })\n    } else {\n        resolve({\n            state: checkResult ? 'resolve' : 'reject',\n            stage: stage,\n            data: checkData\n        });\n    }\n}\n\nclass Feature {\n    constructor(name, stage, handler, checker, beforeReject) {\n        stage = stage || '';\n        stage = stage.toLowerCase();\n        this.name = name;\n        this.stage = stages.indexOf(stage) != -1 ? stage : 'before';\n        this.handler = handler;\n        this.checker = typeof checker === 'function' ? checker : function (result) {\n            return result;\n        };\n        this.beforeReject = typeof beforeReject === 'function' ? beforeReject : function () { };\n    }\n\n    exec(process) {\n        var self = this,\n            args = Array.from(arguments);\n        return new Promise((resolve, reject) => {\n            var result = self.handler.apply(self, args),\n                stage = `${self.stage}.${self.name}`;\n            if (util.isPromise(result)) {\n                result.then(data => {\n                    check(self, data, resolve, process);\n                }).catch(error => {\n                    if (axios.isCancel(error)) {\n                        stage = 'cancel';\n                    }\n                    resolve({\n                        state: 'reject',\n                        stage: stage,\n                        data: error\n                    });\n                })\n            } else {\n                check(self, result, resolve, process);\n            }\n        });\n    }\n}\n\nFeature.map = {};\n\n//认证功能\nFeature.map['auth'] = new Feature('auth', 'before', function (process) {\n    var authOps = process.featureOptions.auth;\n    if (authOps && typeof authOps.handler === 'function') {\n        return authOps.handler(process.requestItemConfig, process.requestArgs);\n    } else {\n        return true;\n    }\n}, null, function (process) {\n    var authOps = process.featureOptions.auth;\n    if (typeof authOps.onUnAuth === 'function') {\n        authOps.onUnAuth(process.requestItemConfig, process.requestArgs);\n    }\n});\n\n//validator功能\nvar validatorFeature = new Feature('validator', 'before', function (process) {\n    var requestConfig = process.requestItemConfig,\n        vsAll = process.computeOptions.validators || {},\n        vsConfig = process.featureOptions.validator,\n        vsRequest = vsAll[process.requestName], //request对应的验证器\n        execValidators = [];\n\n    if (typeof vsRequest === 'function') {\n        execValidators.push(vsRequest)\n    } else if (Array.isArray(vsRequest)) {\n        execValidators = execValidators.concat(vsRequest);\n    }\n    if (typeof vsConfig === 'function') {\n        execValidators.push(vsConfig)\n    } else if (Array.isArray(vsConfig)) {\n        execValidators = execValidators.concat(vsConfig);\n    } else if (typeof vsConfig === 'object' && vsConfig.enabled && vsConfig.validators) {\n        execValidators = execValidators.concat(vsConfig.validators || []);\n    }\n\n    return Promise.all(execValidators.map(item => {\n        var itemResult = item(requestConfig, process.requestArgs);\n        if (util.isPromise(itemResult)) {\n            return itemResult;\n        } else {\n            return Promise.resolve(itemResult);\n        }\n    }));\n}, function (datas, process) {\n    var vsConfig = process.featureOptions.validator,\n        checkHanlder = vsConfig.checkHanlder;\n    if (typeof checkHanlder === 'function') {\n        return checkHanlder(datas);\n    } else {\n        return true;\n    }\n}, function (process) {\n    var vsConfig = process.featureOptions.validator,\n        onUnValid = vsConfig.onUnValid;\n    if (typeof onUnValid === 'function') {\n        var validatorData = process.dataMap.find(item => item.stage === 'before.validator');\n        return onUnValid(validatorData ? validatorData.data : undefined);\n    }\n});\nFeature.map[validatorFeature.name] = validatorFeature;\n\nvar serialiarParams = (handler, params, data, model) => {\n    if (util.isObject(params)) {\n        var dataStr = '';\n        if (util.isObject(data)) {\n            util.extend(true, params, data);\n        } else if (util.isString(data) && data.trim() != '') {\n            dataStr = handler(data);\n        }\n\n        var modelStr = '';\n        if (util.isObject(model)) {\n            util.extend(true, params, model);\n        } else if (util.isString(model) && model.trim() != '') {\n            dataStr = handler(model);\n        }\n\n        if (!dataStr && !modelStr) {\n        } else {\n            params = handler(params);\n            if (dataStr) {\n                params += '&' + dataStr;\n            }\n            if (modelStr) {\n                params += '&' + modelStr;\n            }\n        }\n    } else if (util.isString(params)) {\n        var dataStr = '';\n        if (util.isObject(data) && util.isObject(model)) {\n            dataStr = handler(util.extend(true, {}, data, model));\n        } else if (util.isObject(data) && util.isString(model)) {\n            dataStr = handler(data);\n            if (model && model.trim() !== '') {\n                dataStr += '&' + handler(model);\n            }\n        } else if (util.isString(data) && util.isObject(model)) {\n            dataStr = handler(model);\n            if (data && data.trim() !== '') {\n                dataStr = handler(data) + '&' + dataStr;\n            }\n        } else if (util.isString(data) && util.isString(model)) {\n            if (data && data.trim() !== '') {\n                dataStr += '&' + handler(data);\n            }\n            if (model && model.trim() !== '') {\n                dataStr += '&' + handler(model);\n            }\n        }\n\n        if (dataStr) {\n            params += '&' + dataStr;\n        }\n    } else {\n        var dataStr = '';\n        if (util.isObject(data) && util.isObject(model)) {\n            dataStr = handler(util.extend(true, {}, data, model));\n        } else if (util.isObject(data) && util.isString(model)) {\n            dataStr = handler(data);\n            if (model && model.trim() !== '') {\n                dataStr += '&' + handler(model);\n            }\n        } else if (util.isString(data) && util.isObject(model)) {\n            dataStr = handler(model);\n            if (data && data.trim() !== '') {\n                dataStr = handler(data) + '&' + dataStr;\n            }\n        } else if (util.isString(data) && util.isString(model)) {\n            if (data && data.trim() !== '') {\n                dataStr += '&' + handler(data);\n            }\n            if (model && model.trim() !== '') {\n                dataStr += '&' + handler(model);\n            }\n        } else if (util.isObject(data)) {\n            dataStr = data;\n        } else if (util.isString(data)) {\n            dataStr = handler(data);\n        } else if (util.isObject(model)) {\n            dataStr = model;\n        } else if (util.isString(model)) {\n            dataStr = handler(model);\n        }\n\n        if (dataStr) {\n            params = dataStr;\n        }\n    }\n    return params;\n}\n\nvar serialiarData = (handler, data, model) => {\n    var dataStr = '';\n    if (util.isObject(data) && util.isObject(model)) {\n        return util.extend(true, {}, data, model);\n    } else if (util.isObject(data) && util.isString(model)) {\n        dataStr = handler(data);\n        if (model && model.trim() !== '') {\n            dataStr += '&' + handler(model);\n        }\n        return dataStr;\n    } else if (util.isString(data) && util.isObject(model)) {\n        dataStr = handler(model);\n        if (data && data.trim() !== '') {\n            dataStr = handler(data) + '&' + dataStr;\n        }\n        return dataStr;\n    } else if (util.isString(data) && util.isString(model)) {\n        if (data && data.trim() !== '') {\n            dataStr += '&' + handler(data);\n        }\n        if (model && model.trim() !== '') {\n            dataStr += '&' + handler(model);\n        }\n        return dataStr;\n    } else if (util.isObject(data)) {\n        return data;\n    } else if (util.isString(data)) {\n        return data;\n    } else if (util.isObject(model)) {\n        return model;\n    } else if (util.isString(model)) {\n        return model;\n    } else {\n        return {}\n    }\n}\n\nvar requestDataHandler = (methodType, ajaxOptions, requestModel, paramsSerializer, stringifyData) => {\n    if (methodType === 'get') {\n        ajaxOptions.params = serialiarParams(paramsSerializer, ajaxOptions.params, ajaxOptions.data, requestModel);\n    } else {\n        ajaxOptions.data = serialiarData((data) => {\n            return stringifyData(data, {});\n        }, ajaxOptions.data, requestModel);\n    }\n}\n\n//发送请求功能\nconst senderFeature = new Feature('sender', 'sending', function (process) {\n    var iaxios = process.iaxios,\n        requestName = process.requestName,\n        requestConfig = process.requestItemConfig,\n        ajaxOptions = process.computeOptions.axios,\n        handlers = process.computeOptions.handlers,\n        requestModel = process.requestArgs && process.requestArgs.length > 0 ? process.requestArgs[0] : {};\n\n    //覆盖序列化配置\n    var paramsSerializer = ajaxOptions.paramsSerializer || util.paramsSerializer;\n    ajaxOptions.paramsSerializer = paramsSerializer;\n    var transformRequest = Array.isArray(ajaxOptions.transformRequest) ? ajaxOptions.transformRequest : [function (data) {\n        return util.stringifyData(data);\n    }]\n    ajaxOptions.transformRequest = transformRequest;\n    var stringifyData = transformRequest[0] || function (data) {\n        return util.stringifyData(data);\n    };\n    ajaxOptions.transformRequest[0] = stringifyData;\n\n    //3.获取请求的真实url：getUrl\n    if (typeof handlers.getUrl === 'function') {\n        var computedUrl = handlers.getUrl(requestConfig);\n        if (computedUrl) {\n            ajaxOptions.url = computedUrl + '';\n        } else {\n            ajaxOptions.url = requestConfig.url;\n        }\n    }\n    if (!ajaxOptions.url || String.prototype.trim.call(ajaxOptions.url) === '') {\n        ajaxOptions.url = requestName + '';\n    }\n    //格式化url\n    var featureFormartUrl = process.computeOptions.features.formatUrl;\n    var urlFormater = featureFormartUrl.formater || util.formatString;\n    var getFormatItems = featureFormartUrl.getFormatItems || util.getFormatItems;\n    var formatItems = getFormatItems(ajaxOptions.url);\n    if (featureFormartUrl.enabled && formatItems.length > 0) {\n        var params = util.isObject(ajaxOptions.params) ? ajaxOptions.params : {},\n            data = util.isObject(ajaxOptions.data) ? ajaxOptions.data : {},\n            model = util.isObject(requestModel) ? requestModel : {};\n\n        var values = util.extend(true, {},\n            params,\n            data,\n            model\n        );\n        ajaxOptions.url = urlFormater(ajaxOptions.url, values);\n\n        //是否需要移除format items\n        if (featureFormartUrl.removeFormatedItem) {\n            if (Array.isArray(featureFormartUrl.removeFormatedItem) && featureFormartUrl.removeFormatedItem.length > 0) {\n                featureFormartUrl.removeFormatedItem.forEach(prop => {\n                    delete params[prop];\n                    delete data[prop];\n                    delete model[prop];\n                })\n            } else if (util.isObject(featureFormartUrl.removeFormatedItem)) {\n                for (let prop in featureFormartUrl.removeFormatedItem) {\n                    if (featureFormartUrl.removeFormatedItem[prop]) {\n                        delete params[prop];\n                        delete data[prop];\n                        delete model[prop];\n                    }\n                }\n            } else {\n                formatItems.forEach(prop => {\n                    delete params[prop];\n                    delete data[prop];\n                    delete model[prop];\n                })\n            }\n        }\n    }\n\n    //计算axios 需要发送的数据\n    ajaxOptions.method = ajaxOptions.method || 'get';\n    var methodType = (ajaxOptions.method + '').toLowerCase();\n    requestDataHandler(methodType, ajaxOptions, requestModel, paramsSerializer, stringifyData);\n\n    // 是否是jsonp方式发送\n    var jsonp = process.computeOptions.features.jsonp;\n    if (jsonp && jsonp.enabled) {\n        ajaxOptions.params = ajaxOptions.params || '';\n        var callbackName = 'axios' + new Date().getTime();\n        if (ajaxOptions.params) {\n            ajaxOptions.params += '&' + jsonp.callback + \"=\" + callbackName;\n        } else {\n            ajaxOptions.params += jsonp.callback + \"=\" + callbackName;\n        }\n        if (typeof jsonp.link === 'function') {\n            ajaxOptions.params = jsonp.link(ajaxOptions.params, ajaxOptions.data, ajaxOptions)\n        } else {\n            if (typeof ajaxOptions.data === 'string') {\n                ajaxOptions.params += '&' + ajaxOptions.data;\n            } else if (typeof ajaxOptions.data === 'object') {\n                ajaxOptions.params += '&' + paramsSerializer(ajaxOptions.data);\n            }\n        }\n\n        ajaxOptions.adapter = function (config) {\n            return new Promise((resolve, reject) => {\n                var script = document.createElement('script');\n                var src = config.url;\n\n                if (config.params) {\n                    src += (src.indexOf('?') >= 0 ? '&' : '?') + config.params;\n                }\n\n                script.async = true;\n\n                var isAbort = false;\n\n                var old = window[callbackName];\n                window[callbackName] = function (responseData) {\n                    window[jsonp] = old;\n\n                    if (isAbort) {\n                        return;\n                    }\n\n                    var response = {\n                        data: responseData,\n                        status: 200\n                    }\n\n                    resolve(response);\n                };\n\n                script.onload = script.onreadystatechange = function () {\n\n                    if (!script.readyState || /loaded|complete/.test(script.readyState)) {\n\n                        script.onload = script.onreadystatechange = null;\n\n                        if (script.parentNode) {\n                            script.parentNode.removeChild(script);\n                        }\n\n                        script = null;\n                    }\n                };\n                script.onerror = function () {\n                    reject(new Error('Network error'));\n                }\n\n                if (config.cancelToken) {\n                    config.cancelToken.promise.then(function (cancel) {\n                        if (!script) {\n                            return;\n                        }\n\n                        isAbort = true;\n                        reject(cancel);\n                    });\n                }\n\n                script.src = src;\n\n                document.head.appendChild(script);\n            })\n        }\n    }\n\n    //绑定取消\n    var cancelTokenSource = axios.CancelToken.source();\n    ajaxOptions.cancelToken = cancelTokenSource.token;\n\n    //5.开始发送请求\n    process.cancelToken = cancelTokenSource;\n\n    return iaxios.axios.request(ajaxOptions);\n}, function (res, process) {\n    var handlerCheckResult = process.computeOptions.handlers.checkResult;\n    var result = (handlerCheckResult || function () { return true })(res);\n    return result;\n});\nFeature.map[senderFeature.name] = senderFeature;\n\nexport default Feature;\n","import Feature from './feature.js';\nimport * as util from './util.js';\n\nvar defaultConvert = data => {\n    return data;\n}\n\nvar getConvert = (name, process) => {\n    var handlers = process.computeOptions.handlers,\n        convert = handlers ? handlers[name] : null;\n    convert = typeof convert === 'function' ? convert : defaultConvert;\n    return convert;\n}\n\nexport default class Process {\n    constructor() {\n        this.stack = [];\n        this.iaxios = null;\n        this.otherOptions = null;\n        this.requestName = '';\n        this.requestArgs = null;\n        this.isCancel = false;\n        this.dataMap = [];\n        this.cancelToken = null;\n    }\n\n    run() {\n        //执行run函数后，即锁定当前配置中的Feature，解释后续再有功能的配置变化，也不会执行，函数除外\n        var process = this;\n        process.requestItemConfig = process.iaxios.options.requestConfigList[process.requestName];\n        process.computeOptions = util.extend(true, {}, process.iaxios.options, util.standardRequestConfigItem(process.requestItemConfig), process.otherOptions, process.sendOptions);\n\n        function CancelPromise(executor) {\n            var p = new Promise(function (resolve, reject) {\n                return executor(resolve, reject);\n            });\n            /*eslint no-proto: 0*/\n            p.__proto__ = CancelPromise.prototype;\n            return p;\n        }\n        CancelPromise.__proto__ = Promise;\n        CancelPromise.prototype.__proto__ = Promise.prototype;\n        CancelPromise.prototype.cancel = function (data) {\n            return process.cancel(data);\n        }\n\n        var promise = new CancelPromise((resolve, reject) => {\n            var orgFeatures = process.computeOptions.features;\n            var keys = Object.keys(orgFeatures).filter(name => {\n                var f = orgFeatures[name];\n                return !!f.enabled;//只抓取已启用的功能\n            });\n            var features = keys.map(name => {\n                return Feature.map[name];\n            }).filter(f => {\n                return !!f;\n            });\n            features.push(Feature.map['sender']);\n            features = features.filter(f => f.stage === 'before').concat(features.filter(f => f.stage === 'sending'), features.filter(f => f.stage === 'after'))\n\n            //将功能实例赋值到process上\n            process.featureInstances = features;\n            process.featureOptions = orgFeatures;\n\n            features.forEach(featureIns => {\n                process.use(function (next) {\n                    if (process.isCancel) {\n                        reject(getConvert('rejectConvert', process)(process.dataMap, process.requestItemConfig, process.computeOptions));\n                        return;\n                    }\n\n                    featureIns.exec(process).then(data => {\n                        process.dataMap.push(data);\n                        if (data.state === 'resolve') {\n                            if (featureIns.requiredResolve) {\n                                if (typeof featureIns.breforeResolve === 'function') {\n                                    featureIns.breforeResolve(process);\n                                }\n                                resolve(getConvert('resolveConvert', process)(data.data, process.requestItemConfig, process.computeOptions));\n                            } else {\n                                if (process.stack.length > 0) {\n                                    next();\n                                } else {\n                                    resolve(getConvert('resolveConvert', process)(data.data, process.requestItemConfig, process.computeOptions));\n                                }\n                            }\n                        } else {\n                            if (typeof featureIns.beforeReject === 'function') {\n                                featureIns.beforeReject(process);\n                            }\n                            reject(getConvert('rejectConvert', process)(process.dataMap, process.requestItemConfig, process.computeOptions));\n                        }\n                    });\n                })\n            });\n            process.next();\n        });\n        return promise;\n    }\n\n    cancel(data) {\n        if (this.isCancel) return;\n        this.isCancel = true;\n        if (this.cancelToken) {\n            this.cancelToken.cancel(data);\n        }\n    }\n    use(handler) {\n        if (typeof handler !== 'function') return;\n        this.stack.push(handler);\n    }\n\n    next() {\n        var item = this.stack.shift();\n        if (item) {\n            item(this.next.bind(this));\n        }\n    }\n}\n","import * as util from './util.js';\nexport default {\n    requestConfigList: {}, //request配置元信息集合\n    axios: {\n        //axios配置\n        method: 'get',\n        paramsSerializer: util.paramsSerializer,\n        headers: {\n            common: {\n                'Content-Type': 'application/json'\n            },\n            post: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        },\n        transformRequest: [function (data, headers) {\n            return util.stringifyData(data);\n        }]\n    },\n    validators: {}, //验证器列表\n    features: { //启用iaxios的哪些功能？\n        auth: {\n            enabled: false\n        },\n        formatUrl: {\n            enabled: true,\n            removeFormatedItem: true /*\n            格式化后，是否移除已经用到的格式化项\n            支持4中值：\n            true:移除所有\n            false:保留所有\n            ['item1','item2']:移除'item1'和'item2'\n            {item1:true,item2:false}:移除'item1',保留'item2'\n             */\n        },//格式化url\n        jsonp: {\n            enabled: false,\n            callback: 'callback',\n            link: null // 怎样连接params和data？\n        }, //接口是否以jsonp方式发送\n        validator: {\n            enabled: false\n        }//启用验证器，调用iaxios.createRequest()返回的方法时，先取request配置中的验证器去验证参数，验证通过才会执行下面的逻辑\n    },\n    handlers: {\n        //获取请求的真实url\n        getUrl(requestConfig) {\n            return requestConfig.url;\n        },\n        //检查请求返回的结果，成功请resolve，失败请reject\n        checkResult(res, requestConfig) {\n            return res && res.data ? true : false;\n        },\n        //格式化请求成功的数据\n        resolveConvert(res, requestConfig) {\n            return res.data;\n        },\n        //格式化请求失败的数据\n        rejectConvert(rejectDataMap, requestConfig) {\n            return rejectDataMap;\n        }\n    }\n};\n","import axios from 'axios';\nimport Process from './process.js';\nimport * as util from './util.js';\nimport defaultIAxiosOptions from './options.js';\n\n/**\n * request发送流程：\n * 1.检查认证：auth\n * 2.验证参数：validator\n * 3.获取请求的真实url：getUrl\n * 4.应用计算后的axios配置信息：axios.request\n * 5.开始发送请求\n * 6.检查请求结果：checkResult\n * 7.格式化请求结果数据：成功：resolveConvert，失败：rejectConvert，取消：cancelConvert，未认证：unAuthConvert\n * 8.将处理的数据传递给后续函数处理：then/catch\n * 9.流程结束\n */\n\nclass IAxios {\n    constructor(ops) {\n        this.id = (Math.random() + '').replace('0.', '');\n        IAxios.map[this.id] = this;\n\n        //创建一个axios实例\n        this.axios = axios.create();\n\n        this.options = {};\n        this.setOptions(ops);\n    }\n    createRequest(requestName, otherOptions) {\n        var iaxiosIns = this;\n\n        return function request(model, ops) {\n            var requestArgs = Array.from(arguments),\n                process = new Process();\n            process.iaxios = iaxiosIns;\n            process.otherOptions = otherOptions;\n            process.sendOptions = ops;\n            process.sendModel = model;\n            process.requestName = requestName;\n            process.requestArgs = requestArgs;\n            process.isCancel = false;\n            process.dataMap = [];\n            process.cancelToken = null;\n\n            return process.run();\n        }\n    }\n    setOptions(ops) {\n        if (typeof ops === 'object') {\n            util.validOptions(ops);\n            util.standardFeaturesOptions(ops);\n            util.extend(true, this.options, ops);\n        }\n    }\n    static create(ops) {\n        return new IAxios(util.extend(true, {}, defaultIAxiosOptions, ops));\n    }\n    static createRequest(requestName, otherOptions) {\n        return IAxios.map['default'].createRequest(requestName, otherOptions);\n    }\n    static setOptions(ops) {\n        if (typeof ops === 'object') {\n            util.validOptions(ops);\n            util.standardFeaturesOptions(ops);\n            util.extend(true, defaultIAxiosOptions, ops);\n            IAxios.map['default'].setOptions(ops);\n        }\n    }\n}\nIAxios.map = {};\n\nvar defaultIAxios = IAxios.create();\ndefaultIAxios.id = 'default';\nIAxios.map['default'] = defaultIAxios;\n\nexport default IAxios;\n"],"names":["paramsSerializer","Qs","stringify","obj","arrayFormat","stringifyData","isString","isPromise","then","catch","isObject","regFormatString","getFormatItems","template","items","item","exec","push","formatString","values","replace","match","key","validOptions","ops","msg","hasOwnProperty","babelHelpers.typeof","features","TypeError","requestConfigList","axios","validators","handlers","standardFeaturesOptions","keys","forEach","val","standardRequestConfigItem","cfg","result","undefined","axiosOps","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","isFunction","isPlainObject","stages","check","feature","checkData","resolve","process","checkResult","checker","stage","util","Feature","handler","beforeReject","toLowerCase","indexOf","self","args","from","Promise","reject","apply","data","isCancel","error","map","authOps","featureOptions","auth","requestItemConfig","requestArgs","onUnAuth","validatorFeature","requestConfig","vsAll","computeOptions","vsConfig","validator","vsRequest","requestName","execValidators","concat","enabled","all","itemResult","datas","checkHanlder","onUnValid","validatorData","dataMap","find","serialiarParams","params","model","dataStr","trim","modelStr","serialiarData","requestDataHandler","methodType","ajaxOptions","requestModel","senderFeature","iaxios","transformRequest","getUrl","computedUrl","url","featureFormartUrl","formatUrl","urlFormater","formater","formatItems","removeFormatedItem","prop","method","jsonp","callbackName","Date","getTime","callback","link","adapter","config","script","document","createElement","async","isAbort","old","responseData","response","onload","onreadystatechange","readyState","test","parentNode","removeChild","onerror","Error","cancelToken","promise","cancel","head","appendChild","cancelTokenSource","CancelToken","source","token","request","res","handlerCheckResult","defaultConvert","getConvert","convert","Process","stack","otherOptions","sendOptions","CancelPromise","executor","p","__proto__","orgFeatures","filter","f","featureInstances","use","next","state","featureIns","requiredResolve","breforeResolve","shift","bind","headers","rejectDataMap","IAxios","id","Math","random","create","setOptions","iaxiosIns","sendModel","run","defaultIAxiosOptions","createRequest","defaultIAxios"],"mappings":"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"}