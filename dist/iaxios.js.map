{"version":3,"file":"iaxios.js","sources":["../src/util.js","../src/feature.js","../src/process.js","../src/options.js","../src/index.js"],"sourcesContent":["import Qs from 'qs';\r\nexport var paramsSerializer = obj => {\r\n    return Qs.stringify(obj, { arrayFormat: 'brackets' });//如何序列化params，params会拼接的url后面\r\n}\r\nexport var stringifyData = obj => {\r\n    return Qs.stringify(obj);\r\n}\r\n\r\nexport var isPromise = obj => {\r\n    return obj && obj.then && obj.catch;\r\n}\r\n\r\nexport var uniqueID = () => {\r\n    return (Math.random() + \"\").replace('0.', '');\r\n}\r\n\r\nexport var getValue = (propExp, obj) => {\r\n    try {\r\n        var fun = new Function('obj', 'var result;try{result=obj.' + propExp + ';}catch(error){};return result;');\r\n        return fun(obj);\r\n    } catch (error) {\r\n    }\r\n};\r\n\r\nexport var validOptions = ops => {\r\n    if (typeof ops === 'object') {\r\n        var msg = item => {\r\n            return `${item}必需是object类型`;\r\n        }\r\n        if (ops.hasOwnProperty('features') && typeof ops.features !== 'object') {\r\n            throw new TypeError(msg('options.features'));\r\n        }\r\n        if (ops.hasOwnProperty('requestConfigList') && typeof ops.requestConfigList !== 'object') {\r\n            throw new TypeError(msg('options.requestConfigList'));\r\n        }\r\n        if (ops.hasOwnProperty('axios') && typeof ops.axios !== 'object') {\r\n            throw new TypeError(msg('options.axios'));\r\n        }\r\n        if (ops.hasOwnProperty('validators') && typeof ops.validators !== 'object') {\r\n            throw new TypeError(msg('options.validators'));\r\n        }\r\n        if (ops.hasOwnProperty('handlers') && typeof ops.handlers !== 'object') {\r\n            throw new TypeError(msg('options.handlers'));\r\n        }\r\n    }\r\n}\r\n\r\nexport var standardAuthOptions = item => {\r\n    var vi;\r\n    if (typeof item === 'object') {\r\n        vi = item;\r\n    } else if (typeof item === 'function') {\r\n        vi = {\r\n            handler: item\r\n        };\r\n    } else {\r\n        vi = {\r\n            enabled: item\r\n        };\r\n    }\r\n    return vi;\r\n}\r\n\r\nexport var standardFeaturesOptions = ops => {\r\n    if (ops && typeof ops.features === 'object') {\r\n        Object.keys(ops.features).forEach(key => {\r\n            var val = ops.features[key];\r\n            if (typeof val === 'undefined' || val == null) {\r\n                delete ops.features[key];\r\n            } else if (typeof val === 'boolean') {\r\n                ops.features[key] = {\r\n                    enabled: val\r\n                }\r\n            }\r\n        })\r\n    }\r\n    return ops;\r\n}\r\n\r\nexport var standardRequestConfigItem = (cfg) => {\r\n    if (!cfg) return;\r\n    if (typeof cfg === 'object') {\r\n        standardFeaturesOptions(cfg);\r\n        var result = {\r\n            features: cfg.features,\r\n            handlers: cfg.handlers || {},\r\n            requestConfigList: undefined,\r\n            axios: undefined,\r\n            validators: undefined\r\n        },\r\n            axiosOps = {};\r\n\r\n        Object.keys(cfg).forEach(item => {\r\n            if (!result.hasOwnProperty(item)) {\r\n                axiosOps[item] = cfg[item];\r\n            }\r\n        });\r\n        result.axios = axiosOps;\r\n        return result;\r\n    }\r\n    return cfg;\r\n}\r\n\r\nexport var standardOptions = (ops) => {\r\n    if (!ops || typeof ops !== 'object' || ops === null) return;\r\n    standardFeaturesOptions(ops);\r\n    return ops;\r\n}\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n            function (obj) {\r\n                return jQuery.type(obj) === 'array'\r\n            },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","import axios from 'axios';\r\nimport * as util from './util.js';\r\n\r\nvar CancelToken = axios.CancelToken;\r\n\r\nconst stages = ['before', 'sending', 'after'];\r\n\r\nvar check = (feature, checkData, resolve, process) => {\r\n    var checkResult = feature.checker(checkData, process),\r\n        stage = `${feature.stage}.${feature.name}`;\r\n    if (util.isPromise(checkResult)) {\r\n        checkResult.then(result => {\r\n            resolve({\r\n                state: result ? 'resolve' : 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }, data => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }).catch(error => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        })\r\n    } else {\r\n        resolve({\r\n            state: checkResult ? 'resolve' : 'reject',\r\n            stage: stage,\r\n            data: checkData\r\n        });\r\n    }\r\n}\r\n\r\n\r\nclass Feature {\r\n    constructor(name, stage, handler, checker, beforeReject) {\r\n        stage = stage || '';\r\n        stage = stage.toLowerCase();\r\n        this.name = name;\r\n        this.stage = stages.indexOf(stage) != -1 ? stage : 'before';\r\n        this.handler = handler;\r\n        this.checker = typeof checker === 'function' ? checker : function (result) {\r\n            return result;\r\n        };\r\n        this.beforeReject = typeof beforeReject === 'function' ? beforeReject : function () { };\r\n    }\r\n\r\n    exec(process) {\r\n        var self = this,\r\n            args = Array.from(arguments);\r\n        return new Promise((resolve, reject) => {\r\n            var result = self.handler.apply(self, args),\r\n                stage = `${self.stage}.${self.name}`;\r\n            if (util.isPromise(result)) {\r\n                result.then(data => {\r\n                    check(self, data, resolve, process);\r\n                }, data => {\r\n                    resolve({\r\n                        state: 'reject',\r\n                        stage: stage,\r\n                        data: data\r\n                    });\r\n                }).catch(error => {\r\n                    resolve({\r\n                        state: 'reject',\r\n                        stage: stage,\r\n                        data: error\r\n                    });\r\n                })\r\n            } else {\r\n                check(self, result, resolve, process);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nFeature.map = {};\r\n\r\n\r\n//认证功能\r\nFeature.map['auth'] = new Feature('auth', 'before', function (process) {\r\n    var authOps = process.featureOptions.auth;\r\n    if (authOps && typeof authOps.handler === 'function') {\r\n        return authOps.handler(process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`), process.requestArgs);\r\n    } else {\r\n        return true;\r\n    }\r\n}, null, function (process) {\r\n    var authOps = process.featureOptions.auth;\r\n    if (typeof authOps.onUnAuth === 'function') {\r\n        authOps.onUnAuth(process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`), process.requestArgs);\r\n    }\r\n});\r\n\r\n//validator功能\r\nvar validatorFeature = new Feature('validator', 'before', function (process) {\r\n    var requestConfig = process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`),\r\n        vsAll = process.getIAxiosOptionItem('validators'),\r\n        vsConfig = process.featureOptions.validator,\r\n        vsRequest = vsAll[process.requestName],//request对应的验证器\r\n        execValidators = [];\r\n\r\n    if (typeof vsRequest === 'function') {\r\n        execValidators.push(vsRequest)\r\n    } else if (Array.isArray(vsRequest)) {\r\n        execValidators = execValidators.concat(vsRequest);\r\n    }\r\n    if (typeof vsConfig === 'function') {\r\n        execValidators.push(vsConfig)\r\n    } else if (Array.isArray(vsConfig)) {\r\n        execValidators = execValidators.concat(vsConfig);\r\n    } else if (typeof vsConfig === 'object' && vsConfig.enabled && vsConfig.validators) {\r\n        execValidators = execValidators.concat(vsConfig.validators || []);\r\n    }\r\n\r\n    return Promise.all(execValidators.map(item => {\r\n        var itemResult = item(requestConfig, process.requestArgs);\r\n        if (util.isPromise(itemResult)) {\r\n            return itemResult;\r\n        } else {\r\n            return Promise.resolve(itemResult);\r\n        }\r\n    }));\r\n}, function (datas, process) {\r\n    var vsConfig = process.featureOptions.validator,\r\n        checkHanlder = vsConfig.checkHanlder;\r\n    if (typeof checkHanlder === 'function') {\r\n        return checkHanlder(datas);\r\n    } else {\r\n        return true;\r\n    }\r\n}, function (process) {\r\n    var vsConfig = process.featureOptions.validator,\r\n        onUnValid = vsConfig.onUnValid;\r\n    if (typeof onUnValid === 'function') {\r\n        var validatorData = process.dataMap.find(item => item.stage === 'before.validator');\r\n        return onUnValid(validatorData ? validatorData.data : undefined);\r\n    }\r\n});\r\nFeature.map[validatorFeature.name] = validatorFeature;\r\n\r\n//发送请求功能\r\nconst senderFeature = new Feature('sender', 'sending', function (process) {\r\n    var iaxios = process.iaxios,\r\n        requestName = process.requestName,\r\n        requestConfig = process.getIAxiosOptionItem(`requestConfigList['${requestName}']`),\r\n        ajaxOptions = process.getIAxiosOptionItem('axios'),\r\n        handlers = process.getIAxiosOptionItem(`handlers`);\r\n\r\n    //3.获取请求的真实url：getUrl\r\n    if (typeof handlers.getUrl === 'function') {\r\n        var computedUrl = handlers.getUrl(requestConfig);\r\n        if (computedUrl) {\r\n            ajaxOptions.url = computedUrl + \"\";\r\n        } else {\r\n            ajaxOptions.url = requestConfig.url;\r\n        }\r\n    }\r\n    if (!ajaxOptions.url || String.prototype.trim.call(ajaxOptions.url) === \"\") {\r\n        ajaxOptions.url = requestName + \"\";\r\n    }\r\n\r\n    senderFeature.checker = function (res) {\r\n        return (process.getIAxiosOptionItem('handlers.checkResult') || function () { return true })(res);\r\n    }\r\n\r\n    //4.应用计算后的axios配置信息：axios.request \r\n    ajaxOptions.cancelToken = CancelToken.source().token;\r\n    var requestModel = process.requestArgs && process.requestArgs.length > 0 ? process.requestArgs[0] : {};\r\n    if (ajaxOptions.method === 'get') {\r\n        ajaxOptions.params = ajaxOptions.params || {};\r\n        if (typeof ajaxOptions.params === 'object') {\r\n            util.extend(true, ajaxOptions.params, requestModel);\r\n        } else if (typeof ajaxOptions.params === 'string') {\r\n            ajaxOptions.params += '&' + util.paramsSerializer(requestModel);\r\n        }\r\n    } else {\r\n        ajaxOptions.data = ajaxOptions.data || {};\r\n        if (typeof ajaxOptions.data === 'object') {\r\n            util.extend(true, ajaxOptions.data, requestModel);\r\n        } else if (typeof ajaxOptions.data === 'string') {\r\n            ajaxOptions.data += '&' + util.stringifyData(requestModel);\r\n        }\r\n    }\r\n\r\n    //5.开始发送请求\r\n    return iaxios.axios.request(ajaxOptions);\r\n});\r\nFeature.map[senderFeature.name] = senderFeature;\r\n\r\nexport default Feature;","import Feature from './feature.js';\r\nimport * as util from './util.js';\r\n\r\nvar defaultConvert = data => {\r\n    return data;\r\n}\r\n\r\nvar getConvert = (name, process) => {\r\n    var convert = process.getIAxiosOptionItem('handlers.' + name);\r\n    convert = typeof convert === 'function' ? defaultConvert : convert;\r\n    return convert;\r\n}\r\n\r\nexport default class Process {\r\n    constructor() {\r\n        this.stack = [];\r\n        this.iaxios = null;\r\n        this.otherOptions = null;\r\n        this.requestName = '';\r\n        this.requestArgs = null;\r\n        this.isCancel = false;\r\n        this.dataMap = [];\r\n        this.cancelToken = null;\r\n    }\r\n\r\n    run() {\r\n        //执行run函数后，即锁定当前配置中的Feature，解释后续再有功能的配置变化，也不会执行，函数除外\r\n        var process = this;\r\n        var promise = new Promise((resolve, reject) => {\r\n            var orgFeatures = process.getIAxiosOptionItem('features');\r\n            var keys = Object.keys(orgFeatures).filter(name => {\r\n                var f = orgFeatures[name];\r\n                return !!f.enabled;//只抓取已启用的功能\r\n            });\r\n            var features = keys.map(name => {\r\n                return Feature.map[name];\r\n            }).filter(f => {\r\n                return !!f;\r\n            });\r\n            features.push(Feature.map['sender']);\r\n            features = features.filter(f => f.stage === 'before').concat(features.filter(f => f.stage === 'sending'), features.filter(f => f.stage === 'after'))\r\n\r\n            //将功能实例赋值到process上\r\n            process.featureInstances = features;\r\n            process.featureOptions = orgFeatures;\r\n\r\n\r\n            features.forEach(featureIns => {\r\n                process.use(function (next) {\r\n                    if (process.isCancel) {\r\n                        reject(getConvert('rejectConvert', process)(process.dataMap));\r\n                        return;\r\n                    }\r\n\r\n                    featureIns.exec(process).then(data => {\r\n                        process.dataMap.push(data);\r\n                        if (data.state === 'resolve') {\r\n                            if (featureIns.requiredResolve) {\r\n                                if (typeof featureIns.breforeResolve === 'function') {\r\n                                    featureIns.breforeResolve(process);\r\n                                }\r\n                                resolve(getConvert('resolveConvert', process)(data.data));\r\n                            } else {\r\n                                if (process.stack.length > 0) {\r\n                                    next();\r\n                                } else {\r\n                                    resolve(getConvert('resolveConvert', process)(data.data));\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (typeof featureIns.beforeReject === 'function') {\r\n                                featureIns.beforeReject(process);\r\n                            }\r\n                            reject(getConvert('rejectConvert', process)(process.dataMap));\r\n                        }\r\n                    });\r\n                })\r\n            });\r\n            process.next();\r\n        });\r\n        promise.cancel = function (data) {\r\n            if (process.isCancel) return;\r\n            process.isCancel = true;\r\n            var obj = {\r\n                stage: 'cancel',\r\n                state: 'reject',\r\n                data: data\r\n            };\r\n            process.dataMap.push(obj);\r\n            if (process.cancelToken) {\r\n                process.cancelToken.cancel();\r\n            }\r\n        };\r\n        return promise;\r\n    }\r\n\r\n    getIAxiosOptionItem(propExp) {\r\n        var configProp = `requestConfigList['${this.requestName}']`,\r\n            sendOptions = this.requestArgs.length > 1 ? this.requestArgs[this.requestArgs.length - 1] : undefined,\r\n            otherOptions = this.otherOptions;\r\n        if (configProp == propExp) {\r\n            return this.iaxios.getOptionItem(propExp, sendOptions, otherOptions);\r\n        } else {\r\n            var requestConfig = this.getIAxiosOptionItem(`requestConfigList['${this.requestName}']`),\r\n                standardConfig = util.standardRequestConfigItem(requestConfig);\r\n            return this.iaxios.getOptionItem.call(this.iaxios, propExp, sendOptions, otherOptions, typeof standardConfig === 'object' ? standardConfig : undefined);\r\n        }\r\n    }\r\n\r\n    use(handler) {\r\n        if (typeof handler !== 'function') return;\r\n        this.stack.push(handler);\r\n    }\r\n\r\n    next() {\r\n        var item = this.stack.shift();\r\n        if (item) {\r\n            item(this.next.bind(this));\r\n        }\r\n    }\r\n}","import * as util from './util.js';\r\nexport default {\r\n    requestConfigList: {}, //request配置元信息集合\r\n    axios: {\r\n        //axios配置\r\n        method: 'get',\r\n        paramsSerializer: util.paramsSerializer,\r\n        headers: {\r\n            common: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            post: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }\r\n        },\r\n        transformRequest: [function (data, headers) {\r\n            return util.stringifyData(data);\r\n        }]\r\n    },\r\n    validators: {},//验证器列表\r\n    features: { //启用iaxios的哪些功能？\r\n        auth: {\r\n            enabled: false\r\n        },\r\n        jsonp: {\r\n            enabled: false\r\n        }, //接口是否以jsonp方式发送\r\n        validator: {\r\n            enabled: false\r\n        }//启用验证器，调用iaxios.createRequest()返回的方法时，先取request配置中的验证器去验证参数，验证通过才会执行下面的逻辑\r\n    },\r\n    handlers: {\r\n        //获取请求的真实url\r\n        getUrl(requestConfig) {\r\n            return requestConfig.url;\r\n        },\r\n        //检查请求返回的结果，成功请resolve，失败请reject\r\n        checkResult(res) {\r\n            return res && res.data ? true : false;\r\n        },\r\n        //格式化请求成功的数据\r\n        resolveConvert(res) {\r\n            return res.data;\r\n        },\r\n        //格式化请求失败的数据\r\n        rejectConvert(rejectDataMap) {\r\n            return rejectDataMap;\r\n        }\r\n    }\r\n};","import { version } from '../package.json';\r\nimport axios from 'axios';\r\nimport Process from './process.js';\r\nimport * as util from './util.js';\r\nimport defaultIAxiosOptions from './options.js';\r\n\r\n/**\r\n * request发送流程：\r\n * 1.检查认证：auth\r\n * 2.验证参数：validator\r\n * 3.获取请求的真实url：getUrl\r\n * 4.应用计算后的axios配置信息：axios.request\r\n * 5.开始发送请求\r\n * 6.检查请求结果：checkResult\r\n * 7.格式化请求结果数据：成功：resolveConvert，失败：rejectConvert，取消：cancelConvert，未认证：unAuthConvert\r\n * 8.将处理的数据传递给后续函数处理：then/catch\r\n * 9.流程结束\r\n */\r\n\r\nclass IAxios {\r\n    constructor(ops) {\r\n        this.id = (Math.random() + \"\").replace('0.', '');\r\n        IAxios.map[this.id] = this;\r\n\r\n        //创建一个axios实例\r\n        this.axios = axios.create();\r\n\r\n        this.options = {};\r\n        this.setOptions(ops);\r\n    }\r\n    createRequest(requestName, otherOptions) {\r\n        var iaxiosIns = this;\r\n\r\n        return function request(model, ops) {\r\n            var requestArgs = Array.from(arguments),\r\n                process = new Process();\r\n            process.iaxios = iaxiosIns;\r\n            process.otherOptions = otherOptions;\r\n            process.requestName = requestName;\r\n            process.requestArgs = requestArgs;\r\n            process.isCancel = false;\r\n            process.dataMap = [];\r\n            process.cancelToken = null;\r\n\r\n            return process.run();\r\n        }\r\n    }\r\n    setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.validOptions(ops);\r\n            util.standardFeaturesOptions(ops);\r\n            util.extend(true, this.options, ops);\r\n        }\r\n    }\r\n    getOptionItem(key) {\r\n        if (!key) return;\r\n\r\n        var preOptions = arguments.length > 1 ? Array.from(arguments).splice(1, arguments.length - 1) : [];\r\n\r\n        var vals = [];\r\n        if (preOptions.length > 0) {\r\n            preOptions.forEach(item => {\r\n                if (item) vals.push(util.getValue(key, util.standardOptions(item)));\r\n            })\r\n        }\r\n        vals.push(util.getValue(key, this.options));\r\n        vals.push(util.getValue(key, defaultIAxiosOptions));\r\n        vals = vals.filter(v => {\r\n            return typeof v !== 'undefined' && v != null;\r\n        });\r\n\r\n        var val;\r\n\r\n        if (vals.length > 0) {\r\n            if (key === 'features') {\r\n                if (typeof vals[0] != 'object') {\r\n                    val = vals[0];\r\n                } else {\r\n                    val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n                    Object.keys(val).map(v => {\r\n                        val[v] = util.standardAuthOptions(val[v]);\r\n                    });\r\n                }\r\n            } else if (key.indexOf('features.') == 0 && key.lastIndexOf('.') !== key.length - 1) {\r\n                if (key.indexOf('.') === key.lastIndexOf('.')) {\r\n                    if (typeof vals[0] === 'boolean' && vals[0] === false) {\r\n                        val = {\r\n                            enabled: false\r\n                        };\r\n                    } else {\r\n                        var arr = [];\r\n                        vals.forEach(item => {\r\n                            arr.push(util.standardAuthOptions(item));\r\n                        });\r\n                        val = util.extend.apply(null, [true, {}].concat(arr.reverse()));\r\n                    }\r\n                } else {\r\n                    val = vals.find(v => {\r\n                        return typeof v !== 'undefined' && v != null;\r\n                    });\r\n                }\r\n            } else if (key === 'axios') {\r\n                val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n            } else {\r\n                if (vals.some(item => typeof item === 'object')) {\r\n                    val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n                } else {\r\n                    val = vals.find(v => {\r\n                        return typeof v !== 'undefined' && v != null;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    static create(ops) {\r\n        return new IAxios(ops);\r\n    }\r\n    static createRequest(requestName, otherOptions) {\r\n        return IAxios.map['default'].createRequest(requestName, otherOptions);\r\n    }\r\n    static setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.validOptions(ops);\r\n            util.standardFeaturesOptions(ops);\r\n            util.extend(true, defaultIAxiosOptions, ops);\r\n        }\r\n    }\r\n}\r\nIAxios.map = {};\r\n\r\nvar defaultIAxios = IAxios.create();\r\ndefaultIAxios.id = \"default\";\r\nIAxios.map['default'] = defaultIAxios;\r\n\r\nexport default {\r\n    create: IAxios.create,\r\n    createRequest: IAxios.createRequest,\r\n    setOptions: IAxios.setOptions,\r\n    IAxios: IAxios,\r\n    version: version\r\n}"],"names":["paramsSerializer","Qs","stringify","obj","arrayFormat","stringifyData","isPromise","then","catch","getValue","propExp","fun","Function","error","validOptions","ops","msg","item","hasOwnProperty","babelHelpers.typeof","features","TypeError","requestConfigList","axios","validators","handlers","standardAuthOptions","vi","standardFeaturesOptions","keys","forEach","val","key","standardRequestConfigItem","cfg","result","undefined","axiosOps","standardOptions","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","isFunction","isPlainObject","CancelToken","stages","check","feature","checkData","resolve","process","checkResult","checker","stage","util","Feature","handler","beforeReject","toLowerCase","indexOf","self","args","from","Promise","reject","apply","data","map","authOps","featureOptions","auth","getIAxiosOptionItem","requestName","requestArgs","onUnAuth","validatorFeature","requestConfig","vsAll","vsConfig","validator","vsRequest","push","execValidators","concat","enabled","all","itemResult","datas","checkHanlder","onUnValid","validatorData","dataMap","find","senderFeature","iaxios","ajaxOptions","getUrl","computedUrl","url","trim","res","cancelToken","source","token","requestModel","method","params","request","defaultConvert","getConvert","convert","Process","stack","otherOptions","isCancel","promise","orgFeatures","filter","f","featureInstances","use","next","exec","state","featureIns","requiredResolve","breforeResolve","cancel","configProp","sendOptions","getOptionItem","standardConfig","shift","bind","headers","rejectDataMap","IAxios","id","Math","random","replace","create","setOptions","iaxiosIns","model","run","preOptions","splice","vals","defaultIAxiosOptions","v","reverse","lastIndexOf","arr","some","createRequest","defaultIAxios","version"],"mappings":"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"}