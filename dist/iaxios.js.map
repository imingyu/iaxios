{"version":3,"file":"iaxios.js","sources":["../src/util.js","../src/feature.js","../src/process.js","../src/options.js","../src/index.js"],"sourcesContent":["import Qs from 'qs';\r\nexport var paramsSerializer = obj => {\r\n    return Qs.stringify(obj, { arrayFormat: 'brackets' });//如何序列化params，params会拼接的url后面\r\n}\r\nexport var stringifyData = obj => {\r\n    return Qs.stringify(obj);\r\n}\r\n\r\nexport var isPromise = obj => {\r\n    return obj && obj.then && obj.catch;\r\n}\r\n\r\nexport var uniqueID = () => {\r\n    return (Math.random() + \"\").replace('0.', '');\r\n}\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n            function (obj) {\r\n                return jQuery.type(obj) === 'array'\r\n            },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","import * as util from './util.js';\r\n\r\nconst stages = ['before', 'sending', 'after'];\r\n\r\nvar check = (feature, checkData, resolve) => {\r\n    var checkResult = feature.checker(checkData),\r\n        stage = `${feature.stage}.${feature.name}`;\r\n    if (util.isPromise(checkResult)) {\r\n        checkResult.then(result => {\r\n            resolve({\r\n                state: result ? 'resolve' : 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }, data => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }).catch(error => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        })\r\n    } else {\r\n        resolve({\r\n            state: checkResult ? 'resolve' : 'reject',\r\n            stage: stage,\r\n            data: checkData\r\n        });\r\n    }\r\n}\r\n\r\n\r\nclass Feature {\r\n    constructor(name, stage, handler, checker) {\r\n        stage = stage || '';\r\n        stage = stage.toLowerCase();\r\n        this.name = name;\r\n        this.stage = stages.indexOf(stage) != -1 ? stage : 'before';\r\n        this.handler = handler;\r\n        this.checker = typeof checker === 'function' ? checker : function (result) {\r\n            return !!result;\r\n        };\r\n    }\r\n\r\n    exec() {\r\n        var self = this,\r\n            args = Array.from(arguments);\r\n        return new Promise((resolve, reject) => {\r\n            var result = self.handler.apply(self, args),\r\n                stage = `${self.stage}.${self.name}`;\r\n            if (util.isPromise(result)) {\r\n                result.then(data => {\r\n                    check(self, data, resolve);\r\n                }).catch(error => {\r\n                    resolve({\r\n                        state: 'reject',\r\n                        stage: stage,\r\n                        data: error\r\n                    });\r\n                })\r\n            } else {\r\n                check(self, result, resolve);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nFeature.map = {};\r\n\r\n\r\n//认证功能\r\nFeature.map['auth'] = new Feature('auth', 'before', function (process) {\r\n    var ops = process.computedOptions,\r\n        fs = ops.options.features;\r\n    //读取配置信息中的features.auth选项，如果是个funciton，则返回其执行结果\r\n    if (fs.auth && typeof fs.auth === 'function') {\r\n        return fs.auth(ops.requestConfig, process.requestArgs);\r\n    } else if (fs.auth && typeof fs.auth === 'object') {\r\n        fs.auth.enabled = fs.auth.hasOwnProperty('enabled') ? fs.auth.enabled : true;\r\n        fs.auth.enabled = !!fs.auth.enabled;\r\n        if (typeof fs.auth.handler === 'function') {\r\n            return fs.auth.handler(ops.requestConfig, process.requestArgs);\r\n        } else {\r\n            return true;\r\n        }\r\n    } else {\r\n        return true;\r\n    }\r\n});\r\n\r\n//validator功能\r\nvar validatorFeature = new Feature('validator', 'before', function (iaxiosIns, requestName, otherOptions, requestArgs) {\r\n    var ops = computeOptions(iaxiosIns, requestName, otherOptions, requestArgs),\r\n        fs = ops.options.features,\r\n        requestConfig = ops.requestConfig,\r\n        vsAll = ops.options.validators,//options.validators存储验证器信息\r\n        vsRequest = vsAll[requestConfig.name],//request对应的验证器\r\n        vsConfig = requestConfig.features && requestConfig.features.validator ? requestConfig.features.validator : [],\r\n        execValidators = [],\r\n        execAll = true;\r\n\r\n    if (fs.validator) {\r\n        if (typeof vsRequest === 'function') {\r\n            execValidators.push(vsRequest)\r\n        } else if (Array.isArray(vsRequest)) {\r\n            execValidators = execValidators.concat(vsRequest);\r\n        }\r\n        if (typeof vsConfig === 'function') {\r\n            execValidators.push(vsConfig)\r\n        } else if (Array.isArray(vsConfig)) {\r\n            execValidators = execValidators.concat(vsConfig);\r\n        }\r\n\r\n        return Promise.all(execValidators.map(item => {\r\n            var itemResult = item(requestConfig, requestArgs);\r\n            if (util.isPromise(itemResult)) {\r\n                return itemResult;\r\n            } else {\r\n                Promise.resolve(itemResult);\r\n            }\r\n        }));\r\n    } else {\r\n        return true;\r\n    }\r\n});\r\nFeature.map['validator'] = validatorFeature;\r\n\r\nexport default Feature;","export default class Process {\r\n    constructor() {\r\n        this.stack = [];\r\n        this.iaxios = null;\r\n        this.requestName = '';\r\n        this.requestArgs = null;\r\n        this.isCancel = false;\r\n        this.dataMap = [];\r\n        this.cancelToken = null;\r\n    }\r\n\r\n    use(handler) {\r\n        if (typeof handler !== 'function') return;\r\n        this.stack.push(handler);\r\n    }\r\n\r\n    next() {\r\n        var item = this.stack.shift();\r\n        if (item) {\r\n            item(this.next.bind(this));\r\n        }\r\n    }\r\n}","import * as util from './util.js';\r\nexport default {\r\n    requestConfigList: {}, //request配置元信息集合\r\n    axios: {\r\n        //axios配置\r\n        method: 'get',\r\n        paramsSerializer: util.paramsSerializer,\r\n        headers: {\r\n            common: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            post: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }\r\n        },\r\n        transformRequest: [function (data, headers) {\r\n            return util.stringifyData(data);\r\n        }]\r\n    },\r\n    features: { //启用iaxios的哪些功能？\r\n        auth: false,\r\n        jsonp: false, //接口是否以jsonp方式发送\r\n        tip: true, //当某些配置无法找到，或者功能未启用时，是否在控制台提示相关消息\r\n        validator: false//启用验证器，调用iaxios.createRequest()返回的方法时，先取request配置中的验证器去验证参数，验证通过才会执行下面的逻辑\r\n    },\r\n    handlers: {\r\n        //获取请求的真实url\r\n        getUrl(requestConfig) {\r\n            return requestConfig.url;\r\n        },\r\n        //检查请求返回的结果，成功请resolve，失败请reject\r\n        checkResult(res) {\r\n            return res && res.data ? true : false;\r\n        },\r\n        //格式化请求成功的数据\r\n        resolveConvert(res) {\r\n            return res.data;\r\n        },\r\n        //格式化请求失败的数据\r\n        rejectConvert(rejectDataMap) {\r\n            return rejectDataMap;\r\n        }\r\n    }\r\n};","import { version } from '../package.json';\r\nimport axios from 'axios';\r\nimport Feature from './feature.js';\r\nimport Process from './process.js';\r\nimport * as util from './util.js';\r\nimport defaultIAxiosOptions from './options.js';\r\n\r\nvar CancelToken = axios.CancelToken;\r\n\r\n\r\nconst featureSender = new Feature('sender', 'sending', function (process) {\r\n    console.log(process);\r\n    var options = process.computedOptions.options || {},\r\n        iaxios = process.iaxios,\r\n        axios = iaxios.axios,\r\n        requestName = process.requestName;\r\n    var handlers = options.handlers || {},\r\n        features = options.features || {},\r\n        configList = options.requestConfigList,\r\n        cancelTokenSource = CancelToken.source();\r\n    process.cancelToken = cancelTokenSource;\r\n\r\n    //3.获取请求的真实url：getUrl\r\n    if (typeof handlers.getUrl === 'function') {\r\n        var computedUrl = handlers.getUrl(process.computedOptions.requestConfig);\r\n        if (computedUrl) {\r\n            options.axios.url = computedUrl + \"\";\r\n        }\r\n    }\r\n\r\n    featureSender.checker = function (res) {\r\n        return (process.computedOptions.options.handlers.checkResult || function () { return true })(res);\r\n    }\r\n\r\n    //4.应用计算后的axios配置信息：axios.request \r\n    options.axios.cancelToken = cancelTokenSource.token;\r\n    var requestModel = process.requestArgs && process.requestArgs.length > 0 ? process.requestArgs[0] : {};\r\n    if (options.axios.method === 'get') {\r\n        options.axios.params = options.axios.params || {};\r\n        if (typeof options.axios.params === 'object') {\r\n            util.extend(true, options.axios.params, requestModel);\r\n        } else if (typeof options.axios.params === 'string') {\r\n            options.axios.params += '&' + util.paramsSerializer(requestModel);\r\n        }\r\n    } else {\r\n        options.axios.data = options.axios.data || {};\r\n        if (typeof options.axios.data === 'object') {\r\n            util.extend(true, options.axios.data, requestModel);\r\n        } else if (typeof options.axios.data === 'string') {\r\n            options.axios.data += '&' + util.stringifyData(requestModel);\r\n        }\r\n    }\r\n\r\n    //5.开始发送请求\r\n    return axios.request(options.axios);\r\n});\r\n\r\n\r\n/**\r\n * request发送流程：\r\n * 1.检查认证：auth\r\n * 2.验证参数：validator\r\n * 3.获取请求的真实url：getUrl\r\n * 4.应用计算后的axios配置信息：axios.request\r\n * 5.开始发送请求\r\n * 6.检查请求结果：checkResult\r\n * 7.格式化请求结果数据：成功：resolveConvert，失败：rejectConvert，取消：cancelConvert，未认证：unAuthConvert\r\n * 8.将处理的数据传递给后续函数处理：then/catch\r\n * 9.流程结束\r\n */\r\n\r\nclass IAxios {\r\n    constructor(ops) {\r\n        this.id = (Math.random() + \"\").replace('0.', '');\r\n\r\n        //创建一个axios实例\r\n        this.axios = axios.create();\r\n\r\n        //功能实例\r\n        this.featuresIns = {};\r\n\r\n        this.options = {};\r\n        this.setOptions(ops);\r\n    }\r\n    createRequest(requestName, otherOptions) {\r\n        var iaxiosIns = this;\r\n\r\n        return function request(model, ops) {\r\n            var requestArgs = Array.from(arguments),\r\n                process = new Process(),\r\n                computeOptions = () => {\r\n                    var options = util.extend(true, {}, defaultIAxiosOptions, iaxiosIns.options),\r\n                        requestConfig = options.requestConfigList[requestName];\r\n\r\n                    if (!requestConfig) return;\r\n\r\n                    var copyRequestConfig = util.extend(true, {}, requestConfig);\r\n\r\n                    util.extend(true, options.features, copyRequestConfig.features || {});\r\n                    delete copyRequestConfig.features;\r\n                    util.extend(true, options.handlers, copyRequestConfig.handlers || {});\r\n                    delete copyRequestConfig.handlers;\r\n                    util.extend(true, options.axios, copyRequestConfig);\r\n\r\n                    if (otherOptions) util.extend(true, options, otherOptions);\r\n                    if (requestArgs.length > 1 && typeof requestArgs[1] === 'object') {\r\n                        util.extend(true, options, requestArgs[1]);\r\n                    }\r\n\r\n                    var checkResult = options.handlers.checkResult,\r\n                        resolveConvert = options.handlers.resolveConvert,\r\n                        rejectConvert = options.handlers.rejectConvert;\r\n\r\n                    return {\r\n                        options: options,\r\n                        requestConfig: requestConfig,\r\n                        checkResult: checkResult,\r\n                        resolveConvert: resolveConvert,\r\n                        rejectConvert: rejectConvert\r\n                    };\r\n                },\r\n                checkCancel = function (reject) {\r\n                    if (process.isCancel) {\r\n                        reject(rejectConvert(process.dataMap));\r\n                        return true;\r\n                    }\r\n                }\r\n            process.iaxios = iaxiosIns;\r\n            process.requestName = requestName;\r\n            process.requestArgs = requestArgs;\r\n            process.isCancel = false;\r\n            process.dataMap = [];\r\n            process.cancelToken = null;\r\n\r\n\r\n            var promise = new Promise((resolve, reject) => {\r\n                process.computedOptions = computeOptions();\r\n\r\n\r\n                //1.检查认证：auth\r\n                process.use(function (next) {\r\n                    var ops = computeOptions();\r\n                    process.computedOptions = ops;\r\n\r\n                    if (process.isCancel) {\r\n                        reject(ops.rejectConvert(process.dataMap));\r\n                        return;\r\n                    }\r\n\r\n                    if (ops && ops.options.features && ops.options.features.auth) {\r\n                        process.iaxios.featuresIns.auth.exec(process).then(data => {\r\n                            process.dataMap.push(data);\r\n                            if (data.state === 'resolve') {\r\n                                next();\r\n                            } else {\r\n                                if (typeof ops.options.features.auth === 'object' && typeof ops.options.features.auth.onUnAuth === 'function') {\r\n                                    ops.options.features.auth.onUnAuth(ops.requestConfig, requestArgs);\r\n                                }\r\n                                reject(ops.rejectConvert(process.dataMap));\r\n                            }\r\n                        });\r\n                    } else {\r\n                        next();\r\n                    }\r\n                });\r\n                //2.验证参数：validator\r\n                process.use(function (next) {\r\n                    var ops = computeOptions();\r\n                    process.computedOptions = ops;\r\n\r\n                    if (process.isCancel) {\r\n                        reject(ops.rejectConvert(process.dataMap));\r\n                        return;\r\n                    }\r\n                    if (ops && ops.options.features && ops.options.features.validator) {\r\n                        process.iaxios.featuresIns.validator.exec(process).then(data => {\r\n                            process.dataMap.push(data);\r\n                            if (data.state === 'resolve') {\r\n                                next();\r\n                            } else {\r\n                                reject(ops.rejectConvert(process.dataMap));\r\n                            }\r\n                        });\r\n                    } else {\r\n                        next();\r\n                    }\r\n                });\r\n                process.use(function (next) {\r\n                    var ops = computeOptions();\r\n                    process.computedOptions = ops;\r\n\r\n                    if (process.isCancel) {\r\n                        reject(ops.rejectConvert(process.dataMap));\r\n                        return;\r\n                    }\r\n                    featureSender.exec(process).then(data => {\r\n                        process.dataMap.push(data);\r\n                        if (data.state === 'resolve') {\r\n                            resolve(ops.resolveConvert(data));\r\n                        } else {\r\n                            reject(ops.rejectConvert(process.dataMap));\r\n                        }\r\n                    });\r\n                });\r\n\r\n                process.next();\r\n            });\r\n            promise.cancel = function (data) {\r\n                if (process.isCancel) return;\r\n                process.isCancel = true;\r\n                var obj = {\r\n                    stage: 'cancel',\r\n                    state: 'reject',\r\n                    data: data\r\n                };\r\n                process.dataMap.push(obj);\r\n                if (process.cancelToken) {\r\n                    process.cancelToken.cancel();\r\n                }\r\n            };\r\n\r\n            return promise;\r\n        }\r\n    }\r\n    setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            this.options = util.extend(true, {}, defaultIAxiosOptions, this.options, ops);\r\n            util.extend(true, this.axios.defaults, this.options.axios || {});\r\n\r\n            var self = this;\r\n            Object.keys(this.options.features).forEach(key => {\r\n                var fe = Feature.map[key];\r\n                if (fe) {\r\n                    self.featuresIns[key] = Feature.map[key];\r\n                } else {\r\n                    self.log(`[IAxios]不存在名称是 ${key} 的Feature;`);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    log(msg) {\r\n        if (this.options.features && this.options.features.tip) {\r\n            (typeof this.options.features.tip === 'function' ? this.options.features.tip : console.warn)(msg);\r\n        }\r\n    }\r\n\r\n    static create(ops) {\r\n        return new IAxios(ops);\r\n    }\r\n    static createRequest(requestName, otherOptions) {\r\n        return IAxios.map['default'].createRequest(requestName, otherOptions);\r\n    }\r\n    static setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.extend(true, defaultIAxiosOptions, ops);\r\n            IAxios.map['default'].setOptions(ops);\r\n        }\r\n    }\r\n}\r\nIAxios.map = {};\r\n\r\nvar defaultIAxios = IAxios.create();\r\ndefaultIAxios.id = \"default\";\r\nIAxios.map['default'] = defaultIAxios;\r\n\r\nexport default {\r\n    create: IAxios.create,\r\n    createRequest: IAxios.createRequest,\r\n    setOptions: IAxios.setOptions,\r\n    IAxios: IAxios,\r\n    version: version\r\n}"],"names":["paramsSerializer","Qs","stringify","obj","arrayFormat","stringifyData","isPromise","then","catch","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","hasOwnProperty","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","key","undefined","isFunction","isPlainObject","stages","check","feature","checkData","resolve","checkResult","checker","stage","util","result","Feature","handler","toLowerCase","indexOf","self","args","from","Promise","reject","apply","data","error","map","process","ops","computedOptions","fs","features","auth","requestConfig","requestArgs","babelHelpers.typeof","enabled","validatorFeature","iaxiosIns","requestName","otherOptions","computeOptions","vsAll","validators","validator","execValidators","execAll","vsRequest","push","concat","vsConfig","all","itemResult","item","Process","stack","iaxios","isCancel","dataMap","cancelToken","shift","next","bind","headers","url","res","rejectDataMap","CancelToken","axios","featureSender","log","handlers","configList","requestConfigList","cancelTokenSource","source","getUrl","computedUrl","token","requestModel","method","params","request","IAxios","id","Math","random","replace","create","featuresIns","setOptions","model","defaultIAxiosOptions","copyRequestConfig","resolveConvert","rejectConvert","checkCancel","promise","use","exec","state","onUnAuth","cancel","defaults","keys","forEach","fe","msg","tip","console","warn","createRequest","defaultIAxios","version"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACO,IAAIA,mBAAmB,SAAnBA,gBAAmB,MAAO;WAC1BC,GAAGC,SAAH,CAAaC,GAAb,EAAkB,EAAEC,aAAa,UAAf,EAAlB,CAAP,CADiC;CAA9B;AAGP,AAAO,IAAIC,gBAAgB,SAAhBA,aAAgB,MAAO;WACvBJ,GAAGC,SAAH,CAAaC,GAAb,CAAP;CADG;;AAIP,AAAO,IAAIG,YAAY,SAAZA,SAAY,MAAO;WACnBH,OAAOA,IAAII,IAAX,IAAmBJ,IAAIK,KAA9B;CADG;;AAIP;;;AAKA,AAAO,IAAIC,SAAS,SAATA,MAAS,GAAY;QACxBC,OAAJ;QAAaC,IAAb;QAAmBC,GAAnB;QAAwBC,IAAxB;QAA8BC,WAA9B;QAA2CC,KAA3C;QAAkDC,SAASC,UAAU,CAAV,KAAgB,EAA3E;QACIC,IAAI,CADR;QAEIC,SAASF,UAAUE,MAFvB;QAGIC,OAAO,KAHX;QAIIC,WAAWC,OAAOC,SAAP,CAAiBF,QAJhC;QAKIG,SAASF,OAAOC,SAAP,CAAiBE,cAL9B;QAMIC,aAAa;4BACW,SADX;2BAEU,QAFV;2BAGU,QAHV;6BAIY,UAJZ;0BAKS,OALT;yBAMQ,MANR;2BAOU,QAPV;2BAQU;KAd3B;QAgBIC,SAAS;oBACO,oBAAUxB,GAAV,EAAe;mBAChBwB,OAAOC,IAAP,CAAYzB,GAAZ,MAAqB,UAA5B;SAFC;iBAII0B,MAAMC,OAAN,IACT,UAAU3B,GAAV,EAAe;mBACJwB,OAAOC,IAAP,CAAYzB,GAAZ,MAAqB,OAA5B;SANC;kBAQK,kBAAUA,GAAV,EAAe;mBACdA,OAAO,IAAP,IAAeA,OAAOA,IAAI4B,MAAjC;SATC;mBAWM,mBAAU5B,GAAV,EAAe;mBACf,CAAC6B,MAAMC,WAAW9B,GAAX,CAAN,CAAD,IAA2B+B,SAAS/B,GAAT,CAAlC;SAZC;cAcC,cAAUA,GAAV,EAAe;mBACVA,OAAO,IAAP,GAAcgC,OAAOhC,GAAP,CAAd,GAA4BuB,WAAWL,SAASe,IAAT,CAAcjC,GAAd,CAAX,KAAkC,QAArE;SAfC;uBAiBU,uBAAUA,GAAV,EAAe;gBACtB,CAACA,GAAD,IAAQwB,OAAOC,IAAP,CAAYzB,GAAZ,MAAqB,QAA7B,IAAyCA,IAAIkC,QAAjD,EAA2D;uBAChD,KAAP;;gBAEA;oBACIlC,IAAImC,WAAJ,IAAmB,CAACd,OAAOY,IAAP,CAAYjC,GAAZ,EAAiB,aAAjB,CAApB,IAAuD,CAACqB,OAAOY,IAAP,CAAYjC,IAAImC,WAAJ,CAAgBf,SAA5B,EAAuC,eAAvC,CAA5D,EAAqH;2BAC1G,KAAP;;aAFR,CAIE,OAAOgB,CAAP,EAAU;uBACD,KAAP;;gBAEAC,GAAJ;iBACKA,GAAL,IAAYrC,GAAZ,EAAiB;mBACVqC,QAAQC,SAAR,IAAqBjB,OAAOY,IAAP,CAAYjC,GAAZ,EAAiBqC,GAAjB,CAA5B;;KA9CZ;QAiDI,OAAOxB,MAAP,KAAkB,SAAtB,EAAiC;eACtBA,MAAP;iBACSC,UAAU,CAAV,KAAgB,EAAzB;YACI,CAAJ;;QAEA,QAAOD,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,IAA8B,CAACW,OAAOe,UAAP,CAAkB1B,MAAlB,CAAnC,EAA8D;iBACjD,EAAT;;QAEAG,WAAWD,CAAf,EAAkB;iBACL,IAAT;UACEA,CAAF;;SAECA,CAAL,EAAQA,IAAIC,MAAZ,EAAoBD,GAApB,EAAyB;YACjB,CAACR,UAAUO,UAAUC,CAAV,CAAX,KAA4B,IAAhC,EAAsC;iBAC7BP,IAAL,IAAaD,OAAb,EAAsB;sBACZM,OAAOL,IAAP,CAAN;uBACOD,QAAQC,IAAR,CAAP;oBACIK,WAAWH,IAAf,EAAqB;;;oBAGjBO,QAAQP,IAAR,KAAiBc,OAAOgB,aAAP,CAAqB9B,IAArB,MAA+BC,cAAca,OAAOG,OAAP,CAAejB,IAAf,CAA7C,CAAjB,CAAJ,EAA0F;wBAClFC,WAAJ,EAAiB;sCACC,KAAd;gCACQF,OAAOe,OAAOG,OAAP,CAAelB,GAAf,CAAP,GAA6BA,GAA7B,GAAmC,EAA3C;qBAFJ,MAGO;gCACKA,OAAOe,OAAOgB,aAAP,CAAqB/B,GAArB,CAAP,GAAmCA,GAAnC,GAAyC,EAAjD;;;2BAGGD,IAAP,IAAeF,OAAOW,IAAP,EAAaL,KAAb,EAAoBF,IAApB,CAAf;iBARJ,MASO,IAAIA,SAAS4B,SAAb,EAAwB;2BACpB9B,IAAP,IAAeE,IAAf;;;;;WAKTG,MAAP;CArFG;;ACfP,IAAM4B,SAAS,CAAC,QAAD,EAAW,SAAX,EAAsB,OAAtB,CAAf;;AAEA,IAAIC,QAAQ,SAARA,KAAQ,CAACC,OAAD,EAAUC,SAAV,EAAqBC,OAArB,EAAiC;QACrCC,cAAcH,QAAQI,OAAR,CAAgBH,SAAhB,CAAlB;QACII,QAAWL,QAAQK,KAAnB,SAA4BL,QAAQnC,IADxC;QAEIyC,SAAA,CAAeH,WAAf,CAAJ,EAAiC;oBACjB1C,IAAZ,CAAiB,kBAAU;oBACf;uBACG8C,SAAS,SAAT,GAAqB,QADxB;uBAEGF,KAFH;sBAGEJ;aAHV;SADJ,EAMG,gBAAQ;oBACC;uBACG,QADH;uBAEGI,KAFH;sBAGEJ;aAHV;SAPJ,EAYGvC,KAZH,CAYS,iBAAS;oBACN;uBACG,QADH;uBAEG2C,KAFH;sBAGEJ;aAHV;SAbJ;KADJ,MAoBO;gBACK;mBACGE,cAAc,SAAd,GAA0B,QAD7B;mBAEGE,KAFH;kBAGEJ;SAHV;;CAxBR;;IAiCMO;qBACU3C,IAAZ,EAAkBwC,KAAlB,EAAyBI,OAAzB,EAAkCL,OAAlC,EAA2C;;;gBAC/BC,SAAS,EAAjB;gBACQA,MAAMK,WAAN,EAAR;aACK7C,IAAL,GAAYA,IAAZ;aACKwC,KAAL,GAAaP,OAAOa,OAAP,CAAeN,KAAf,KAAyB,CAAC,CAA1B,GAA8BA,KAA9B,GAAsC,QAAnD;aACKI,OAAL,GAAeA,OAAf;aACKL,OAAL,GAAe,OAAOA,OAAP,KAAmB,UAAnB,GAAgCA,OAAhC,GAA0C,UAAUG,MAAV,EAAkB;mBAChE,CAAC,CAACA,MAAT;SADJ;;;;;+BAKG;gBACCK,OAAO,IAAX;gBACIC,OAAO9B,MAAM+B,IAAN,CAAW3C,SAAX,CADX;mBAEO,IAAI4C,OAAJ,CAAY,UAACb,OAAD,EAAUc,MAAV,EAAqB;oBAChCT,SAASK,KAAKH,OAAL,CAAaQ,KAAb,CAAmBL,IAAnB,EAAyBC,IAAzB,CAAb;oBACIR,QAAWO,KAAKP,KAAhB,SAAyBO,KAAK/C,IADlC;oBAEIyC,SAAA,CAAeC,MAAf,CAAJ,EAA4B;2BACjB9C,IAAP,CAAY,gBAAQ;8BACVmD,IAAN,EAAYM,IAAZ,EAAkBhB,OAAlB;qBADJ,EAEGxC,KAFH,CAES,iBAAS;gCACN;mCACG,QADH;mCAEG2C,KAFH;kCAGEc;yBAHV;qBAHJ;iBADJ,MAUO;0BACGP,IAAN,EAAYL,MAAZ,EAAoBL,OAApB;;aAdD,CAAP;;;;;;AAoBRM,QAAQY,GAAR,GAAc,EAAd;;;AAIAZ,QAAQY,GAAR,CAAY,MAAZ,IAAsB,IAAIZ,OAAJ,CAAY,MAAZ,EAAoB,QAApB,EAA8B,UAAUa,OAAV,EAAmB;QAC/DC,MAAMD,QAAQE,eAAlB;QACIC,KAAKF,IAAI1D,OAAJ,CAAY6D,QADrB;;QAGID,GAAGE,IAAH,IAAW,OAAOF,GAAGE,IAAV,KAAmB,UAAlC,EAA8C;eACnCF,GAAGE,IAAH,CAAQJ,IAAIK,aAAZ,EAA2BN,QAAQO,WAAnC,CAAP;KADJ,MAEO,IAAIJ,GAAGE,IAAH,IAAWG,QAAOL,GAAGE,IAAV,MAAmB,QAAlC,EAA4C;WAC5CA,IAAH,CAAQI,OAAR,GAAkBN,GAAGE,IAAH,CAAQ/C,cAAR,CAAuB,SAAvB,IAAoC6C,GAAGE,IAAH,CAAQI,OAA5C,GAAsD,IAAxE;WACGJ,IAAH,CAAQI,OAAR,GAAkB,CAAC,CAACN,GAAGE,IAAH,CAAQI,OAA5B;YACI,OAAON,GAAGE,IAAH,CAAQjB,OAAf,KAA2B,UAA/B,EAA2C;mBAChCe,GAAGE,IAAH,CAAQjB,OAAR,CAAgBa,IAAIK,aAApB,EAAmCN,QAAQO,WAA3C,CAAP;SADJ,MAEO;mBACI,IAAP;;KAND,MAQA;eACI,IAAP;;CAfc,CAAtB;;;AAoBA,IAAIG,mBAAmB,IAAIvB,OAAJ,CAAY,WAAZ,EAAyB,QAAzB,EAAmC,UAAUwB,SAAV,EAAqBC,WAArB,EAAkCC,YAAlC,EAAgDN,WAAhD,EAA6D;QAC/GN,MAAMa,eAAeH,SAAf,EAA0BC,WAA1B,EAAuCC,YAAvC,EAAqDN,WAArD,CAAV;QACIJ,KAAKF,IAAI1D,OAAJ,CAAY6D,QADrB;QAEIE,gBAAgBL,IAAIK,aAFxB;QAGIS,QAAQd,IAAI1D,OAAJ,CAAYyE,UAHxB;;gBAIgBD,MAAMT,cAAc9D,IAApB,CAJhB;;eAKe8D,cAAcF,QAAd,IAA0BE,cAAcF,QAAd,CAAuBa,SAAjD,GAA6DX,cAAcF,QAAd,CAAuBa,SAApF,GAAgG,EAL/G;QAMIC,iBAAiB,EANrB;QAOIC,UAAU,IAPd;;QASIhB,GAAGc,SAAP,EAAkB;YACV,OAAOG,SAAP,KAAqB,UAAzB,EAAqC;2BAClBC,IAAf,CAAoBD,SAApB;SADJ,MAEO,IAAI1D,MAAMC,OAAN,CAAcyD,SAAd,CAAJ,EAA8B;6BAChBF,eAAeI,MAAf,CAAsBF,SAAtB,CAAjB;;YAEA,OAAOG,QAAP,KAAoB,UAAxB,EAAoC;2BACjBF,IAAf,CAAoBE,QAApB;SADJ,MAEO,IAAI7D,MAAMC,OAAN,CAAc4D,QAAd,CAAJ,EAA6B;6BACfL,eAAeI,MAAf,CAAsBC,QAAtB,CAAjB;;;eAGG7B,QAAQ8B,GAAR,CAAYN,eAAenB,GAAf,CAAmB,gBAAQ;gBACtC0B,aAAaC,KAAKpB,aAAL,EAAoBC,WAApB,CAAjB;gBACItB,SAAA,CAAewC,UAAf,CAAJ,EAAgC;uBACrBA,UAAP;aADJ,MAEO;wBACK5C,OAAR,CAAgB4C,UAAhB;;SALW,CAAZ,CAAP;KAZJ,MAoBO;eACI,IAAP;;CA/Be,CAAvB;AAkCAtC,QAAQY,GAAR,CAAY,WAAZ,IAA2BW,gBAA3B;;IClIqBiB;uBACH;;;aACLC,KAAL,GAAa,EAAb;aACKC,MAAL,GAAc,IAAd;aACKjB,WAAL,GAAmB,EAAnB;aACKL,WAAL,GAAmB,IAAnB;aACKuB,QAAL,GAAgB,KAAhB;aACKC,OAAL,GAAe,EAAf;aACKC,WAAL,GAAmB,IAAnB;;;;;4BAGA5C,SAAS;gBACL,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;iBAC9BwC,KAAL,CAAWP,IAAX,CAAgBjC,OAAhB;;;;+BAGG;gBACCsC,OAAO,KAAKE,KAAL,CAAWK,KAAX,EAAX;gBACIP,IAAJ,EAAU;qBACD,KAAKQ,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAL;;;;;;;AClBZ,2BAAe;uBACQ,EADR;WAEJ;;gBAEK,KAFL;0BAGelD,gBAHf;iBAIM;oBACG;gCACY;aAFf;kBAIC;gCACc;;SATrB;0BAYe,CAAC,UAAUY,IAAV,EAAgBuC,OAAhB,EAAyB;mBACjCnD,aAAA,CAAmBY,IAAnB,CAAP;SADc;KAdX;cAkBD;cACA,KADA;eAEC,KAFD;aAGD,IAHC;mBAIK,KAJL;KAlBC;cAwBD;;cAAA,kBAECS,aAFD,EAEgB;mBACXA,cAAc+B,GAArB;SAHE;;;mBAAA,uBAMMC,GANN,EAMW;mBACNA,OAAOA,IAAIzC,IAAX,GAAkB,IAAlB,GAAyB,KAAhC;SAPE;;;sBAAA,0BAUSyC,GAVT,EAUc;mBACTA,IAAIzC,IAAX;SAXE;;;qBAAA,yBAcQ0C,aAdR,EAcuB;mBAClBA,aAAP;;;CAvCZ;;ACMA,IAAIC,cAAcC,MAAMD,WAAxB;;AAGA,IAAME,gBAAgB,IAAIvD,OAAJ,CAAY,QAAZ,EAAsB,SAAtB,EAAiC,UAAUa,OAAV,EAAmB;YAC9D2C,GAAR,CAAY3C,OAAZ;QACIzD,UAAUyD,QAAQE,eAAR,CAAwB3D,OAAxB,IAAmC,EAAjD;QACIsF,SAAS7B,QAAQ6B,MADrB;QAEIY,WAAQZ,OAAOY,KAFnB;QAGI7B,cAAcZ,QAAQY,WAH1B;QAIIgC,WAAWrG,QAAQqG,QAAR,IAAoB,EAAnC;QACIxC,WAAW7D,QAAQ6D,QAAR,IAAoB,EADnC;QAEIyC,aAAatG,QAAQuG,iBAFzB;QAGIC,oBAAoBP,YAAYQ,MAAZ,EAHxB;YAIQhB,WAAR,GAAsBe,iBAAtB;;;QAGI,OAAOH,SAASK,MAAhB,KAA2B,UAA/B,EAA2C;YACnCC,cAAcN,SAASK,MAAT,CAAgBjD,QAAQE,eAAR,CAAwBI,aAAxC,CAAlB;YACI4C,WAAJ,EAAiB;oBACLT,KAAR,CAAcJ,GAAd,GAAoBa,cAAc,EAAlC;;;;kBAIMnE,OAAd,GAAwB,UAAUuD,GAAV,EAAe;eAC5B,CAACtC,QAAQE,eAAR,CAAwB3D,OAAxB,CAAgCqG,QAAhC,CAAyC9D,WAAzC,IAAwD,YAAY;mBAAS,IAAP;SAAvE,EAAsFwD,GAAtF,CAAP;KADJ;;;YAKQG,KAAR,CAAcT,WAAd,GAA4Be,kBAAkBI,KAA9C;QACIC,eAAepD,QAAQO,WAAR,IAAuBP,QAAQO,WAAR,CAAoBvD,MAApB,GAA6B,CAApD,GAAwDgD,QAAQO,WAAR,CAAoB,CAApB,CAAxD,GAAiF,EAApG;QACIhE,QAAQkG,KAAR,CAAcY,MAAd,KAAyB,KAA7B,EAAoC;gBACxBZ,KAAR,CAAca,MAAd,GAAuB/G,QAAQkG,KAAR,CAAca,MAAd,IAAwB,EAA/C;YACI9C,QAAOjE,QAAQkG,KAAR,CAAca,MAArB,MAAgC,QAApC,EAA8C;kBAC1C,CAAY,IAAZ,EAAkB/G,QAAQkG,KAAR,CAAca,MAAhC,EAAwCF,YAAxC;SADJ,MAEO,IAAI,OAAO7G,QAAQkG,KAAR,CAAca,MAArB,KAAgC,QAApC,EAA8C;oBACzCb,KAAR,CAAca,MAAd,IAAwB,MAAMrE,gBAAA,CAAsBmE,YAAtB,CAA9B;;KALR,MAOO;gBACKX,KAAR,CAAc5C,IAAd,GAAqBtD,QAAQkG,KAAR,CAAc5C,IAAd,IAAsB,EAA3C;YACIW,QAAOjE,QAAQkG,KAAR,CAAc5C,IAArB,MAA8B,QAAlC,EAA4C;kBACxC,CAAY,IAAZ,EAAkBtD,QAAQkG,KAAR,CAAc5C,IAAhC,EAAsCuD,YAAtC;SADJ,MAEO,IAAI,OAAO7G,QAAQkG,KAAR,CAAc5C,IAArB,KAA8B,QAAlC,EAA4C;oBACvC4C,KAAR,CAAc5C,IAAd,IAAsB,MAAMZ,aAAA,CAAmBmE,YAAnB,CAA5B;;;;;WAKDX,SAAMc,OAAN,CAAchH,QAAQkG,KAAtB,CAAP;CA5CkB,CAAtB;;;;;;;;;;;;;;;IA6DMe;oBACUvD,GAAZ,EAAiB;;;aACRwD,EAAL,GAAU,CAACC,KAAKC,MAAL,KAAgB,EAAjB,EAAqBC,OAArB,CAA6B,IAA7B,EAAmC,EAAnC,CAAV;;;aAGKnB,KAAL,GAAaA,MAAMoB,MAAN,EAAb;;;aAGKC,WAAL,GAAmB,EAAnB;;aAEKvH,OAAL,GAAe,EAAf;aACKwH,UAAL,CAAgB9D,GAAhB;;;;;sCAEUW,aAAaC,cAAc;gBACjCF,YAAY,IAAhB;;mBAEO,SAAS4C,OAAT,CAAiBS,KAAjB,EAAwB/D,GAAxB,EAA6B;oBAC5BM,cAAc7C,MAAM+B,IAAN,CAAW3C,SAAX,CAAlB;oBACIkD,UAAU,IAAI2B,OAAJ,EADd;oBAEIb,iBAAiB,SAAjBA,cAAiB,GAAM;wBACfvE,UAAU0C,MAAA,CAAY,IAAZ,EAAkB,EAAlB,EAAsBgF,oBAAtB,EAA4CtD,UAAUpE,OAAtD,CAAd;wBACI+D,gBAAgB/D,QAAQuG,iBAAR,CAA0BlC,WAA1B,CADpB;;wBAGI,CAACN,aAAL,EAAoB;;wBAEhB4D,oBAAoBjF,MAAA,CAAY,IAAZ,EAAkB,EAAlB,EAAsBqB,aAAtB,CAAxB;;0BAEA,CAAY,IAAZ,EAAkB/D,QAAQ6D,QAA1B,EAAoC8D,kBAAkB9D,QAAlB,IAA8B,EAAlE;2BACO8D,kBAAkB9D,QAAzB;0BACA,CAAY,IAAZ,EAAkB7D,QAAQqG,QAA1B,EAAoCsB,kBAAkBtB,QAAlB,IAA8B,EAAlE;2BACOsB,kBAAkBtB,QAAzB;0BACA,CAAY,IAAZ,EAAkBrG,QAAQkG,KAA1B,EAAiCyB,iBAAjC;;wBAEIrD,YAAJ,EAAkB5B,MAAA,CAAY,IAAZ,EAAkB1C,OAAlB,EAA2BsE,YAA3B;wBACdN,YAAYvD,MAAZ,GAAqB,CAArB,IAA0BwD,QAAOD,YAAY,CAAZ,CAAP,MAA0B,QAAxD,EAAkE;8BAC9D,CAAY,IAAZ,EAAkBhE,OAAlB,EAA2BgE,YAAY,CAAZ,CAA3B;;;wBAGAzB,cAAcvC,QAAQqG,QAAR,CAAiB9D,WAAnC;wBACIqF,iBAAiB5H,QAAQqG,QAAR,CAAiBuB,cADtC;wBAEIC,gBAAgB7H,QAAQqG,QAAR,CAAiBwB,aAFrC;;2BAIO;iCACM7H,OADN;uCAEY+D,aAFZ;qCAGUxB,WAHV;wCAIaqF,cAJb;uCAKYC;qBALnB;iBAzBR;oBAiCIC,cAAc,SAAdA,WAAc,CAAU1E,MAAV,EAAkB;wBACxBK,QAAQ8B,QAAZ,EAAsB;+BACXsC,cAAcpE,QAAQ+B,OAAtB,CAAP;+BACO,IAAP;;iBApCZ;wBAuCQF,MAAR,GAAiBlB,SAAjB;wBACQC,WAAR,GAAsBA,WAAtB;wBACQL,WAAR,GAAsBA,WAAtB;wBACQuB,QAAR,GAAmB,KAAnB;wBACQC,OAAR,GAAkB,EAAlB;wBACQC,WAAR,GAAsB,IAAtB;;oBAGIsC,UAAU,IAAI5E,OAAJ,CAAY,UAACb,OAAD,EAAUc,MAAV,EAAqB;4BACnCO,eAAR,GAA0BY,gBAA1B;;;4BAIQyD,GAAR,CAAY,UAAUrC,IAAV,EAAgB;4BACpBjC,MAAMa,gBAAV;gCACQZ,eAAR,GAA0BD,GAA1B;;4BAEID,QAAQ8B,QAAZ,EAAsB;mCACX7B,IAAImE,aAAJ,CAAkBpE,QAAQ+B,OAA1B,CAAP;;;;4BAIA9B,OAAOA,IAAI1D,OAAJ,CAAY6D,QAAnB,IAA+BH,IAAI1D,OAAJ,CAAY6D,QAAZ,CAAqBC,IAAxD,EAA8D;oCAClDwB,MAAR,CAAeiC,WAAf,CAA2BzD,IAA3B,CAAgCmE,IAAhC,CAAqCxE,OAArC,EAA8C5D,IAA9C,CAAmD,gBAAQ;wCAC/C2F,OAAR,CAAgBV,IAAhB,CAAqBxB,IAArB;oCACIA,KAAK4E,KAAL,KAAe,SAAnB,EAA8B;;iCAA9B,MAEO;wCACCjE,QAAOP,IAAI1D,OAAJ,CAAY6D,QAAZ,CAAqBC,IAA5B,MAAqC,QAArC,IAAiD,OAAOJ,IAAI1D,OAAJ,CAAY6D,QAAZ,CAAqBC,IAArB,CAA0BqE,QAAjC,KAA8C,UAAnG,EAA+G;4CACvGnI,OAAJ,CAAY6D,QAAZ,CAAqBC,IAArB,CAA0BqE,QAA1B,CAAmCzE,IAAIK,aAAvC,EAAsDC,WAAtD;;2CAEGN,IAAImE,aAAJ,CAAkBpE,QAAQ+B,OAA1B,CAAP;;6BARR;yBADJ,MAYO;;;qBArBX;;4BA0BQwC,GAAR,CAAY,UAAUrC,IAAV,EAAgB;4BACpBjC,MAAMa,gBAAV;gCACQZ,eAAR,GAA0BD,GAA1B;;4BAEID,QAAQ8B,QAAZ,EAAsB;mCACX7B,IAAImE,aAAJ,CAAkBpE,QAAQ+B,OAA1B,CAAP;;;4BAGA9B,OAAOA,IAAI1D,OAAJ,CAAY6D,QAAnB,IAA+BH,IAAI1D,OAAJ,CAAY6D,QAAZ,CAAqBa,SAAxD,EAAmE;oCACvDY,MAAR,CAAeiC,WAAf,CAA2B7C,SAA3B,CAAqCuD,IAArC,CAA0CxE,OAA1C,EAAmD5D,IAAnD,CAAwD,gBAAQ;wCACpD2F,OAAR,CAAgBV,IAAhB,CAAqBxB,IAArB;oCACIA,KAAK4E,KAAL,KAAe,SAAnB,EAA8B;;iCAA9B,MAEO;2CACIxE,IAAImE,aAAJ,CAAkBpE,QAAQ+B,OAA1B,CAAP;;6BALR;yBADJ,MASO;;;qBAjBX;4BAqBQwC,GAAR,CAAY,UAAUrC,IAAV,EAAgB;4BACpBjC,MAAMa,gBAAV;gCACQZ,eAAR,GAA0BD,GAA1B;;4BAEID,QAAQ8B,QAAZ,EAAsB;mCACX7B,IAAImE,aAAJ,CAAkBpE,QAAQ+B,OAA1B,CAAP;;;sCAGUyC,IAAd,CAAmBxE,OAAnB,EAA4B5D,IAA5B,CAAiC,gBAAQ;oCAC7B2F,OAAR,CAAgBV,IAAhB,CAAqBxB,IAArB;gCACIA,KAAK4E,KAAL,KAAe,SAAnB,EAA8B;wCAClBxE,IAAIkE,cAAJ,CAAmBtE,IAAnB,CAAR;6BADJ,MAEO;uCACII,IAAImE,aAAJ,CAAkBpE,QAAQ+B,OAA1B,CAAP;;yBALR;qBARJ;;4BAkBQG,IAAR;iBAtEU,CAAd;wBAwEQyC,MAAR,GAAiB,UAAU9E,IAAV,EAAgB;wBACzBG,QAAQ8B,QAAZ,EAAsB;4BACdA,QAAR,GAAmB,IAAnB;wBACI9F,MAAM;+BACC,QADD;+BAEC,QAFD;8BAGA6D;qBAHV;4BAKQkC,OAAR,CAAgBV,IAAhB,CAAqBrF,GAArB;wBACIgE,QAAQgC,WAAZ,EAAyB;gCACbA,WAAR,CAAoB2C,MAApB;;iBAVR;;uBAcOL,OAAP;aAtIJ;;;;mCAyIOrE,KAAK;gBACR,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;qBACpB1D,OAAL,GAAe0C,MAAA,CAAY,IAAZ,EAAkB,EAAlB,EAAsBgF,oBAAtB,EAA4C,KAAK1H,OAAjD,EAA0D0D,GAA1D,CAAf;sBACA,CAAY,IAAZ,EAAkB,KAAKwC,KAAL,CAAWmC,QAA7B,EAAuC,KAAKrI,OAAL,CAAakG,KAAb,IAAsB,EAA7D;;oBAEIlD,OAAO,IAAX;uBACOsF,IAAP,CAAY,KAAKtI,OAAL,CAAa6D,QAAzB,EAAmC0E,OAAnC,CAA2C,eAAO;wBAC1CC,KAAK5F,QAAQY,GAAR,CAAY1B,GAAZ,CAAT;wBACI0G,EAAJ,EAAQ;6BACCjB,WAAL,CAAiBzF,GAAjB,IAAwBc,QAAQY,GAAR,CAAY1B,GAAZ,CAAxB;qBADJ,MAEO;6BACEsE,GAAL,mDAA2BtE,GAA3B;;iBALR;;;;;4BAUJ2G,KAAK;gBACD,KAAKzI,OAAL,CAAa6D,QAAb,IAAyB,KAAK7D,OAAL,CAAa6D,QAAb,CAAsB6E,GAAnD,EAAwD;iBACnD,OAAO,KAAK1I,OAAL,CAAa6D,QAAb,CAAsB6E,GAA7B,KAAqC,UAArC,GAAkD,KAAK1I,OAAL,CAAa6D,QAAb,CAAsB6E,GAAxE,GAA8EC,QAAQC,IAAvF,EAA6FH,GAA7F;;;;;+BAIM/E,KAAK;mBACR,IAAIuD,MAAJ,CAAWvD,GAAX,CAAP;;;;sCAEiBW,aAAaC,cAAc;mBACrC2C,OAAOzD,GAAP,CAAW,SAAX,EAAsBqF,aAAtB,CAAoCxE,WAApC,EAAiDC,YAAjD,CAAP;;;;mCAEcZ,KAAK;gBACf,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;sBACzB,CAAY,IAAZ,EAAkBgE,oBAAlB,EAAwChE,GAAxC;uBACOF,GAAP,CAAW,SAAX,EAAsBgE,UAAtB,CAAiC9D,GAAjC;;;;;;;AAIZuD,OAAOzD,GAAP,GAAa,EAAb;;AAEA,IAAIsF,gBAAgB7B,OAAOK,MAAP,EAApB;AACAwB,cAAc5B,EAAd,GAAmB,SAAnB;AACAD,OAAOzD,GAAP,CAAW,SAAX,IAAwBsF,aAAxB;;AAEA,YAAe;YACH7B,OAAOK,MADJ;mBAEIL,OAAO4B,aAFX;gBAGC5B,OAAOO,UAHR;YAIHP,MAJG;aAKF8B;CALb;;;;;;;;"}