{"version":3,"file":"iaxios.js","sources":["../src/util.js","../src/feature.js","../src/process.js","../src/options.js","../src/index.js"],"sourcesContent":["import Qs from 'qs';\r\nexport var paramsSerializer = obj => {\r\n    return Qs.stringify(obj, { arrayFormat: 'brackets' });//如何序列化params，params会拼接的url后面\r\n}\r\nexport var stringifyData = obj => {\r\n    return Qs.stringify(obj);\r\n}\r\n\r\nexport var isPromise = obj => {\r\n    return obj && obj.then && obj.catch;\r\n}\r\n\r\nexport var uniqueID = () => {\r\n    return (Math.random() + \"\").replace('0.', '');\r\n}\r\n\r\nexport var getValue = (propExp, obj) => {\r\n    var fun = new Function('obj', 'var noop = function () { };var result;try{var safeWindow={alert:noop,confirm:noop,prompt:noop};with(obj){result=' + propExp + '}}catch(error){};return result;');\r\n    return fun(obj);\r\n};\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n            function (obj) {\r\n                return jQuery.type(obj) === 'array'\r\n            },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","import axios from 'axios';\r\nimport * as util from './util.js';\r\n\r\nvar CancelToken = axios.CancelToken;\r\n\r\nconst stages = ['before', 'sending', 'after'];\r\n\r\nvar check = (feature, checkData, resolve, process) => {\r\n    var checkResult = feature.checker(checkData, process),\r\n        stage = `${feature.stage}.${feature.name}`;\r\n    if (util.isPromise(checkResult)) {\r\n        checkResult.then(result => {\r\n            resolve({\r\n                state: result ? 'resolve' : 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }, data => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        }).catch(error => {\r\n            resolve({\r\n                state: 'reject',\r\n                stage: stage,\r\n                data: checkData\r\n            });\r\n        })\r\n    } else {\r\n        resolve({\r\n            state: checkResult ? 'resolve' : 'reject',\r\n            stage: stage,\r\n            data: checkData\r\n        });\r\n    }\r\n}\r\n\r\n\r\nclass Feature {\r\n    constructor(name, stage, handler, checker, beforeReject) {\r\n        stage = stage || '';\r\n        stage = stage.toLowerCase();\r\n        this.name = name;\r\n        this.stage = stages.indexOf(stage) != -1 ? stage : 'before';\r\n        this.handler = handler;\r\n        this.checker = typeof checker === 'function' ? checker : function (result) {\r\n            return result;\r\n        };\r\n        this.beforeReject = typeof beforeReject === 'function' ? beforeReject : function () { };\r\n    }\r\n\r\n    exec(process) {\r\n        var self = this,\r\n            args = Array.from(arguments);\r\n        return new Promise((resolve, reject) => {\r\n            var result = self.handler.apply(self, args),\r\n                stage = `${self.stage}.${self.name}`;\r\n            if (util.isPromise(result)) {\r\n                result.then(data => {\r\n                    check(self, data, resolve, process);\r\n                }).catch(error => {\r\n                    resolve({\r\n                        state: 'reject',\r\n                        stage: stage,\r\n                        data: error\r\n                    });\r\n                })\r\n            } else {\r\n                check(self, result, resolve, process);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nFeature.map = {};\r\n\r\n\r\n//认证功能\r\nFeature.map['auth'] = new Feature('auth', 'before', function (process) {\r\n    var ops = process.getIAxiosOptionItem('features.auth');\r\n    if (ops && typeof ops.handler === 'function') {\r\n        return ops.handler(process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`), process.requestArgs);\r\n    } else {\r\n        return true;\r\n    }\r\n}, null, function (process) {\r\n    var ops = process.getIAxiosOptionItem('features.auth');\r\n    if (typeof ops.onUnAuth === 'function') {\r\n        return ops.onUnAuth(process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`), process.requestArgs);\r\n    }\r\n});\r\n\r\n//validator功能\r\nvar validatorFeature = new Feature('validator', 'before', function (process) {\r\n    var requestConfig = process.getIAxiosOptionItem(`requestConfigList['${process.requestName}']`),\r\n        vsAll = process.getIAxiosOptionItem('validators'),\r\n        vsConfig = process.getIAxiosOptionItem('features.validator'),\r\n        vsRequest = vsAll[process.requestName],//request对应的验证器\r\n        execValidators = [];\r\n\r\n    if (typeof vsRequest === 'function') {\r\n        execValidators.push(vsRequest)\r\n    } else if (Array.isArray(vsRequest)) {\r\n        execValidators = execValidators.concat(vsRequest);\r\n    }\r\n    if (typeof vsConfig === 'function') {\r\n        execValidators.push(vsConfig)\r\n    } else if (Array.isArray(vsConfig)) {\r\n        execValidators = execValidators.concat(vsConfig);\r\n    } else if (typeof vsConfig === 'object' && vsConfig.enabled && vsConfig.validators) {\r\n        execValidators = execValidators.concat(vsConfig.validators || []);\r\n    }\r\n\r\n    return Promise.all(execValidators.map(item => {\r\n        var itemResult = item(requestConfig, process.requestArgs);\r\n        if (util.isPromise(itemResult)) {\r\n            return itemResult;\r\n        } else {\r\n            return Promise.resolve(itemResult);\r\n        }\r\n    }));\r\n}, function (datas, process) {\r\n    var checkHanlder = process.getIAxiosOptionItem('features.validator.checkHanlder');\r\n    if (typeof checkHanlder === 'function') {\r\n        return checkHanlder(datas);\r\n    } else {\r\n        return true;\r\n    }\r\n}, function (process) {\r\n    var onUnValid = process.getIAxiosOptionItem('features.validator.onUnValid');\r\n    if (typeof onUnValid === 'function') {\r\n        var validatorData = process.dataMap.find(item => item.stage === 'before.validator');\r\n        return onUnValid(validatorData ? validatorData.data : undefined);\r\n    }\r\n});\r\nFeature.map[validatorFeature.name] = validatorFeature;\r\n\r\n//发送请求功能\r\nconst senderFeature = new Feature('sender', 'sending', function (process) {\r\n    var iaxios = process.iaxios,\r\n        requestName = process.requestName,\r\n        requestConfig = process.getIAxiosOptionItem(`requestConfigList['${requestName}']`),\r\n        ajaxOptions = process.getIAxiosOptionItem('axios');\r\n    process.cancelToken = CancelToken.source();\r\n\r\n    //3.获取请求的真实url：getUrl\r\n    var getUrl = process.getIAxiosOptionItem(`handlers.getUrl`);\r\n    if (typeof getUrl === 'function') {\r\n        var computedUrl = getUrl(requestConfig);\r\n        if (computedUrl) {\r\n            ajaxOptions.url = computedUrl + \"\";\r\n        }\r\n    }\r\n\r\n    senderFeature.checker = function (res) {\r\n        return (process.getIAxiosOptionItem('handlers.checkResult') || function () { return true })(res);\r\n    }\r\n\r\n    //4.应用计算后的axios配置信息：axios.request \r\n    ajaxOptions.cancelToken = cancelTokenSource.token;\r\n    var requestModel = process.requestArgs && process.requestArgs.length > 0 ? process.requestArgs[0] : {};\r\n    if (ajaxOptions.method === 'get') {\r\n        ajaxOptions.params = ajaxOptions.params || {};\r\n        if (typeof ajaxOptions.params === 'object') {\r\n            util.extend(true, ajaxOptions.params, requestModel);\r\n        } else if (typeof ajaxOptions.params === 'string') {\r\n            ajaxOptions.params += '&' + util.paramsSerializer(requestModel);\r\n        }\r\n    } else {\r\n        ajaxOptions.data = ajaxOptions.data || {};\r\n        if (typeof ajaxOptions.data === 'object') {\r\n            util.extend(true, ajaxOptions.data, requestModel);\r\n        } else if (typeof ajaxOptions.data === 'string') {\r\n            ajaxOptions.data += '&' + util.stringifyData(requestModel);\r\n        }\r\n    }\r\n\r\n    //5.开始发送请求\r\n    return axios.request(ajaxOptions);\r\n});\r\nFeature.map[senderFeature.name] = senderFeature;\r\n\r\nexport default Feature;","import Feature from './feature.js';\r\nimport * as util from './util.js';\r\n\r\nvar defaultConvert = data => {\r\n    return data;\r\n}\r\n\r\nvar getConvert = (name, process) => {\r\n    var convert = process.getIAxiosOptionItem('handlers.' + name);\r\n    convert = typeof convert === 'function' ? defaultConvert : convert;\r\n    return convert;\r\n}\r\n\r\nexport default class Process {\r\n    constructor() {\r\n        this.stack = [];\r\n        this.iaxios = null;\r\n        this.otherOptions = null;\r\n        this.requestName = '';\r\n        this.requestArgs = null;\r\n        this.isCancel = false;\r\n        this.dataMap = [];\r\n        this.cancelToken = null;\r\n    }\r\n\r\n    run() {\r\n        //执行run函数后，即锁定当前配置中的Feature，解释后续再有功能的配置变化，也不会执行，函数除外\r\n        var process = this;\r\n        var promise = new Promise((resolve, reject) => {\r\n            var orgFeatures = process.getIAxiosOptionItem('features'),\r\n                keys = Object.keys(orgFeatures).filter(name => {\r\n                    var f = orgFeatures[name];\r\n                    return !!f.enabled;//只抓取已启用的功能\r\n                });\r\n            var features = keys.map(name => {\r\n                return Feature.map[name];\r\n            }).filter(f => {\r\n                return !!f;\r\n            });\r\n            features = features.filter(f => f.stage === 'before').concat(features.filter(f => f.stage === 'sending'), features.filter(f => f.stage === 'after'))\r\n            features.forEach(featureIns => {\r\n                process.use(function (next) {\r\n                    if (process.isCancel) {\r\n                        reject(getConvert('rejectConvert', process)(process.dataMap));\r\n                        return;\r\n                    }\r\n\r\n                    featureIns.exec(process).then(data => {\r\n                        process.dataMap.push(data);\r\n                        if (data.state === 'resolve') {\r\n                            if (featureIns.requiredResolve) {\r\n                                if (typeof featureIns.breforeResolve === 'function') {\r\n                                    featureIns.breforeResolve(process);\r\n                                }\r\n                                resolve(getConvert('resolveConvert', process)(data.data));\r\n                            } else {\r\n                                next();\r\n                            }\r\n                        } else {\r\n                            if (typeof featureIns.beforeReject === 'function') {\r\n                                featureIns.beforeReject(process);\r\n                            }\r\n                            reject(getConvert('rejectConvert', process)(process.dataMap));\r\n                        }\r\n                    });\r\n                })\r\n            });\r\n            console.log(`process next start...`);\r\n            process.next();\r\n        });\r\n        promise.cancel = function (data) {\r\n            if (process.isCancel) return;\r\n            process.isCancel = true;\r\n            var obj = {\r\n                stage: 'cancel',\r\n                state: 'reject',\r\n                data: data\r\n            };\r\n            process.dataMap.push(obj);\r\n            if (process.cancelToken) {\r\n                process.cancelToken.cancel();\r\n            }\r\n        };\r\n        return promise;\r\n    }\r\n\r\n    getIAxiosOptionItem(propExp) {\r\n        return this.iaxios.getOptionItem(propExp, this.requestArgs > 1 ? this.requestArgs[this.requestArgs.length - 1] : undefined, this.otherOptions || undefined);\r\n    }\r\n\r\n    sortFeature() {\r\n        var features = [],\r\n            opsFeatures = this.iaxios.getOptionItem('features');\r\n    }\r\n\r\n    use(handler) {\r\n        if (typeof handler !== 'function') return;\r\n        this.stack.push(handler);\r\n    }\r\n\r\n    next() {\r\n        var item = this.stack.shift();\r\n        if (item) {\r\n            item(this.next.bind(this));\r\n        }else{\r\n            console.log('process next end.')\r\n        }\r\n    }\r\n}","import * as util from './util.js';\r\nexport default {\r\n    requestConfigList: {}, //request配置元信息集合\r\n    axios: {\r\n        //axios配置\r\n        method: 'get',\r\n        paramsSerializer: util.paramsSerializer,\r\n        headers: {\r\n            common: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            post: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }\r\n        },\r\n        transformRequest: [function (data, headers) {\r\n            return util.stringifyData(data);\r\n        }]\r\n    },\r\n    validators: {},//验证器列表\r\n    features: { //启用iaxios的哪些功能？\r\n        auth: false,\r\n        jsonp: false, //接口是否以jsonp方式发送\r\n        validator: false//启用验证器，调用iaxios.createRequest()返回的方法时，先取request配置中的验证器去验证参数，验证通过才会执行下面的逻辑\r\n    },\r\n    handlers: {\r\n        //获取请求的真实url\r\n        getUrl(requestConfig) {\r\n            return requestConfig.url;\r\n        },\r\n        //检查请求返回的结果，成功请resolve，失败请reject\r\n        checkResult(res) {\r\n            return res && res.data ? true : false;\r\n        },\r\n        //格式化请求成功的数据\r\n        resolveConvert(res) {\r\n            return res.data;\r\n        },\r\n        //格式化请求失败的数据\r\n        rejectConvert(rejectDataMap) {\r\n            return rejectDataMap;\r\n        }\r\n    }\r\n};","import { version } from '../package.json';\r\nimport axios from 'axios';\r\nimport Process from './process.js';\r\nimport * as util from './util.js';\r\nimport defaultIAxiosOptions from './options.js';\r\n\r\nvar CancelToken = axios.CancelToken;\r\n\r\n/**\r\n * request发送流程：\r\n * 1.检查认证：auth\r\n * 2.验证参数：validator\r\n * 3.获取请求的真实url：getUrl\r\n * 4.应用计算后的axios配置信息：axios.request\r\n * 5.开始发送请求\r\n * 6.检查请求结果：checkResult\r\n * 7.格式化请求结果数据：成功：resolveConvert，失败：rejectConvert，取消：cancelConvert，未认证：unAuthConvert\r\n * 8.将处理的数据传递给后续函数处理：then/catch\r\n * 9.流程结束\r\n */\r\n\r\nclass IAxios {\r\n    constructor(ops) {\r\n        this.id = (Math.random() + \"\").replace('0.', '');\r\n        IAxios.map[this.id] = this;\r\n\r\n        //创建一个axios实例\r\n        this.axios = axios.create();\r\n\r\n        this.options = {};\r\n        this.setOptions(ops);\r\n    }\r\n    createRequest(requestName, otherOptions) {\r\n        var iaxiosIns = this;\r\n\r\n        return function request(model, ops) {\r\n            console.log('send request...');\r\n            var requestArgs = Array.from(arguments),\r\n                process = new Process();\r\n            process.iaxios = iaxiosIns;\r\n            process.otherOptions = otherOptions;\r\n            process.requestName = requestName;\r\n            process.requestArgs = requestArgs;\r\n            process.isCancel = false;\r\n            process.dataMap = [];\r\n            process.cancelToken = null;\r\n\r\n            return process.run();\r\n        }\r\n    }\r\n    setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.extend(true, this.options, ops);\r\n        }\r\n    }\r\n    getOptionItem(key, ...preOptions) {\r\n        if (!key) return;\r\n\r\n        var vals = [],\r\n            isGetFeature = key.indexOf('features') == 0;\r\n        if (preOptions.length > 0) {\r\n            preOptions.forEach(item => {\r\n                if (item) vals.push(util.getValue(key, item));\r\n            })\r\n        }\r\n        vals.push(util.getValue(key, this.options));\r\n        vals.push(util.getValue(key, defaultIAxiosOptions));\r\n        vals = vals.filter(v => {\r\n            return typeof v !== 'undefined' && v != null;\r\n        });\r\n\r\n        var val;\r\n\r\n        if (vals.length > 0) {\r\n            if (!isGetFeature) {\r\n                val = vals.find(v => {\r\n                    return typeof v !== 'undefined' && v != null;\r\n                });\r\n            } else {\r\n                if (key === 'features') {\r\n                    val = util.extend.apply(null, [true, {}].concat(vals.reverse()));\r\n                    Object.keys(val).map(v => {\r\n                        var item = val[v],\r\n                            vi;\r\n                        if (typeof item === 'object') {\r\n                            vi = item;\r\n                        } else if (typeof item === 'function') {\r\n                            vi = {\r\n                                handler: item\r\n                            };\r\n                        } else {\r\n                            vi = {\r\n                                enabled: item\r\n                            };\r\n                        }\r\n                        val[v] = vi;\r\n                    });\r\n                } else {\r\n                    if (key.indexOf('.') === key.lastIndexOf('.')) {\r\n                        if (typeof vals[0] === 'boolean' && vals[0] === false) {\r\n                            val = {\r\n                                enabled: false\r\n                            };\r\n                        } else {\r\n                            var arr = [];\r\n                            vals.forEach(item => {\r\n                                if (typeof item === 'object') {\r\n                                    arr.push(item)\r\n                                } else if (typeof item === 'function') {\r\n                                    arr.push({\r\n                                        handler: item\r\n                                    })\r\n                                } else {\r\n                                    arr.push({\r\n                                        enabled: item\r\n                                    })\r\n                                }\r\n                            });\r\n                            val = util.extend.apply(null, [true, {}].concat(arr.reverse()));\r\n                        }\r\n                    } else {\r\n                        val = vals.find(v => {\r\n                            return typeof v !== 'undefined' && v != null;\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    static create(ops) {\r\n        return new IAxios(ops);\r\n    }\r\n    static createRequest(requestName, otherOptions) {\r\n        return IAxios.map['default'].createRequest(requestName, otherOptions);\r\n    }\r\n    static setOptions(ops) {\r\n        if (typeof ops === 'object') {\r\n            util.extend(true, defaultIAxiosOptions, ops);\r\n        }\r\n    }\r\n}\r\nIAxios.map = {};\r\n\r\nvar defaultIAxios = IAxios.create();\r\ndefaultIAxios.id = \"default\";\r\nIAxios.map['default'] = defaultIAxios;\r\n\r\nexport default {\r\n    create: IAxios.create,\r\n    createRequest: IAxios.createRequest,\r\n    setOptions: IAxios.setOptions,\r\n    IAxios: IAxios,\r\n    version: version\r\n}"],"names":["paramsSerializer","Qs","stringify","obj","arrayFormat","stringifyData","isPromise","then","catch","getValue","propExp","fun","Function","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","hasOwnProperty","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","key","undefined","isFunction","isPlainObject","CancelToken","axios","stages","check","feature","checkData","resolve","process","checkResult","checker","stage","util","result","Feature","handler","beforeReject","toLowerCase","indexOf","self","args","from","Promise","reject","apply","data","error","map","ops","getIAxiosOptionItem","requestName","requestArgs","onUnAuth","validatorFeature","requestConfig","vsAll","vsConfig","vsRequest","push","execValidators","concat","enabled","validators","all","itemResult","item","datas","checkHanlder","onUnValid","validatorData","dataMap","find","senderFeature","iaxios","ajaxOptions","cancelToken","source","getUrl","computedUrl","url","res","cancelTokenSource","token","requestModel","method","params","babelHelpers.typeof","request","defaultConvert","getConvert","convert","Process","stack","otherOptions","isCancel","promise","orgFeatures","keys","filter","f","features","forEach","use","next","exec","state","featureIns","requiredResolve","breforeResolve","log","cancel","getOptionItem","opsFeatures","shift","bind","headers","rejectDataMap","IAxios","id","Math","random","replace","create","setOptions","iaxiosIns","model","run","vals","isGetFeature","preOptions","defaultIAxiosOptions","v","val","reverse","vi","lastIndexOf","arr","createRequest","defaultIAxios","version"],"mappings":"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"}